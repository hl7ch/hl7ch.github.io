@prefix fhir: <http://hl7.org/fhir/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# - resource -------------------------------------------------------------------

<http://fhir.ch/ig/ch-rad-order/StructureMap/RadOrderQrToBundle> a fhir:StructureMap ;
  fhir:nodeRole fhir:treeRoot ;
  fhir:id [ fhir:v "RadOrderQrToBundle"] ; # 
  fhir:text [
     fhir:status [ fhir:v "generated" ] ;
     fhir:div [ fhir:v "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p class=\"res-header-id\"><b>Generated Narrative: StructureMap RadOrderQrToBundle</b></p><a name=\"RadOrderQrToBundle\"> </a><a name=\"hcRadOrderQrToBundle\"> </a><pre class=\"fml\">#xD;\n<b>map</b><span style=\"color: navy\"> \"</span>http://fhir.ch/ig/ch-rad-order/StructureMap/RadOrderQrToBundle<span style=\"color: navy\">\" = \"</span>RadOrderQrToBundle<span style=\"color: navy\">\"#xD;\n#xD;\n</span><span style=\"color: navy\">// </span><span style=\"color: green\">Radiologoy QuestionnaireResponse to Bundle</span>#xD;\n<span style=\"color: navy\">// </span><span style=\"color: green\">Derived from ORF QuestionnaireResponse to Bundle</span>#xD;\n<span style=\"color: navy\">// </span><span style=\"color: green\">2021-01-11 Oliver Egger, copyright ahdis ag, Apache License</span>#xD;\n<span style=\"color: navy\">// </span><span style=\"color: green\">QRF Questionnaire: http://fhir.ch/ig/ch-orf/Questionnaire-order-referral-form.html</span>#xD;\n<span style=\"color: navy\">// </span><span style=\"color: green\">QRF QuestionnaireResponse: http://fhir.ch/ig/ch-orf/QuestionnaireResponse-order-referral-form.xml.html</span>#xD;\n<span style=\"color: navy\">// </span><span style=\"color: green\">Bundle: http://fhir.ch/ig/ch-orf/StructureDefinition-ch-orf-document.html</span>#xD;\n#xD;\n<b>uses</b><span style=\"color: navy\"> \"</span><a href=\"http://hl7.org/fhir/R4/questionnaireresponse.html\" title=\"QuestionnaireResponse\">http://hl7.org/fhir/StructureDefinition/QuestionnaireResponse</a><span style=\"color: navy\">\" </span><b>alias </b>QuestionnaireResponse <b>as </b><b>source</b>#xD;\n<b>uses</b><span style=\"color: navy\"> \"</span><a href=\"http://hl7.org/fhir/R4/bundle.html\" title=\"Bundle\">http://hl7.org/fhir/StructureDefinition/Bundle</a><span style=\"color: navy\">\" </span><b>alias </b>Bundle <b>as </b><b>target</b>#xD;\n<b>uses</b><span style=\"color: navy\"> \"</span><a href=\"http://hl7.org/fhir/R4/composition.html\" title=\"Composition\">http://hl7.org/fhir/StructureDefinition/Composition</a><span style=\"color: navy\">\" </span><b>alias </b>Composition <b>as </b><b>target</b>#xD;\n<b>uses</b><span style=\"color: navy\"> \"</span><a href=\"http://hl7.org/fhir/R4/patient.html\" title=\"Patient\">http://hl7.org/fhir/StructureDefinition/Patient</a><span style=\"color: navy\">\" </span><b>alias </b>Patient <b>as </b><b>target</b>#xD;\n<b>uses</b><span style=\"color: navy\"> \"</span><a href=\"http://hl7.org/fhir/R4/relatedperson.html\" title=\"RelatedPerson\">http://hl7.org/fhir/StructureDefinition/RelatedPerson</a><span style=\"color: navy\">\" </span><b>alias </b>RelatedPerson <b>as </b><b>target</b>#xD;\n<b>uses</b><span style=\"color: navy\"> \"</span><a href=\"http://hl7.org/fhir/R4/organization.html\" title=\"Organization\">http://hl7.org/fhir/StructureDefinition/Organization</a><span style=\"color: navy\">\" </span><b>alias </b>Organization <b>as </b><b>target</b>#xD;\n<b>uses</b><span style=\"color: navy\"> \"</span><a href=\"http://hl7.org/fhir/R4/practitioner.html\" title=\"Practitioner\">http://hl7.org/fhir/StructureDefinition/Practitioner</a><span style=\"color: navy\">\" </span><b>alias </b>Practitioner <b>as </b><b>target</b>#xD;\n<b>uses</b><span style=\"color: navy\"> \"</span><a href=\"http://hl7.org/fhir/R4/practitionerrole.html\" title=\"PractitionerRole\">http://hl7.org/fhir/StructureDefinition/PractitionerRole</a><span style=\"color: navy\">\" </span><b>alias </b>PractitionerRole <b>as </b><b>target</b>#xD;\n<b>uses</b><span style=\"color: navy\"> \"</span><a href=\"http://hl7.org/fhir/R4/servicerequest.html\" title=\"ServiceRequest\">http://hl7.org/fhir/StructureDefinition/ServiceRequest</a><span style=\"color: navy\">\" </span><b>alias </b>ServiceRequest <b>as </b><b>target</b>#xD;\n<b>uses</b><span style=\"color: navy\"> \"</span><a href=\"http://hl7.org/fhir/R4/extensibility.html#Extension\" title=\"Extension\">http://hl7.org/fhir/StructureDefinition/Extension</a><span style=\"color: navy\">\" </span><b>alias </b>Extension <b>as </b><b>target</b>#xD;\n<b>uses</b><span style=\"color: navy\"> \"</span><a href=\"http://hl7.org/fhir/R4/episodeofcare.html\" title=\"EpisodeOfCare\">http://hl7.org/fhir/StructureDefinition/EpisodeOfCare</a><span style=\"color: navy\">\" </span><b>alias </b>EpisodeOfCare <b>as </b><b>target</b>#xD;\n<b>uses</b><span style=\"color: navy\"> \"</span><a href=\"http://hl7.org/fhir/R4/questionnaireresponse.html\" title=\"QuestionnaireResponse\">http://hl7.org/fhir/StructureDefinition/QuestionnaireResponse</a><span style=\"color: navy\">\" </span><b>alias </b>QuestionnaireResponseTarget <b>as </b><b>target</b>#xD;\n<b>uses</b><span style=\"color: navy\"> \"</span><a href=\"http://hl7.org/fhir/R4/questionnaireresponse.html\" title=\"QuestionnaireResponse\">http://hl7.org/fhir/StructureDefinition/QuestionnaireResponse</a><span style=\"color: navy\">\" </span><b>alias </b>QuestionnaireResponse <b>as </b><b>source</b>#xD;\n<b>uses</b><span style=\"color: navy\"> \"</span><a href=\"http://hl7.org/fhir/R4/bundle.html\" title=\"Bundle\">http://hl7.org/fhir/StructureDefinition/Bundle</a><span style=\"color: navy\">\" </span><b>alias </b>Bundle <b>as </b><b>target</b>#xD;\n<b>uses</b><span style=\"color: navy\"> \"</span><a href=\"http://hl7.org/fhir/R4/patient.html\" title=\"Patient\">http://hl7.org/fhir/StructureDefinition/Patient</a><span style=\"color: navy\">\" </span><b>alias </b>Patient <b>as </b><b>target</b>#xD;\n<b>uses</b><span style=\"color: navy\"> \"</span><a href=\"http://hl7.org/fhir/R4/organization.html\" title=\"Organization\">http://hl7.org/fhir/StructureDefinition/Organization</a><span style=\"color: navy\">\" </span><b>alias </b>Organization <b>as </b><b>target</b>#xD;\n<b>uses</b><span style=\"color: navy\"> \"</span><a href=\"http://hl7.org/fhir/R4/practitioner.html\" title=\"Practitioner\">http://hl7.org/fhir/StructureDefinition/Practitioner</a><span style=\"color: navy\">\" </span><b>alias </b>Practitioner <b>as </b><b>target</b>#xD;\n<b>uses</b><span style=\"color: navy\"> \"</span><a href=\"http://hl7.org/fhir/R4/practitionerrole.html\" title=\"PractitionerRole\">http://hl7.org/fhir/StructureDefinition/PractitionerRole</a><span style=\"color: navy\">\" </span><b>alias </b>PractitionerRole <b>as </b><b>target</b>#xD;\n<b>uses</b><span style=\"color: navy\"> \"</span><a href=\"http://hl7.org/fhir/R4/servicerequest.html\" title=\"ServiceRequest\">http://hl7.org/fhir/StructureDefinition/ServiceRequest</a><span style=\"color: navy\">\" </span><b>alias </b>ServiceRequest <b>as </b><b>target</b>#xD;\n#xD;\n<b>imports</b><span style=\"color: navy\"> \"</span><a href=\"http://fhir.ch/ig/ch-orf/3.0.2/StructureMap-OrfQrToBundle.html\" title=\"OrfQrToBundle\">http://fhir.ch/ig/ch-orf/StructureMap/OrfQrToBundle</a><span style=\"color: navy\">\"#xD;\n</span>#xD;\n<b>group </b>RadOrderQrToBundle<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">qr</span><span style=\"color: navy\"> : </span>QuestionnaireResponse, <b>target</b> <span style=\"color: maroon\">bundle</span><span style=\"color: navy\"> : </span>Bundle<span style=\"color: navy\">)</span><span style=\"color: navy\"> {#xD;\n</span>  qr<span style=\"color: navy\"><b> -&gt; </b></span> bundle.identifier<b> as </b><span style=\"color: maroon\">documentIdentifier</span><span style=\"color: navy\">, </span> documentIdentifier.system = <span style=\"color: blue\">'urn:ietf:rfc:3986'</span><span style=\"color: navy\">, </span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuidDoc</span><span style=\"color: navy\">, </span> documentIdentifier.value = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">uuidDoc</span><span style=\"color: navy\">)</span> <i>\"documentIdentifier\"</i><span style=\"color: navy\">;</span>#xD;\n  qr<b> as </b><span style=\"color: maroon\">qrcp</span><span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">e</span><span style=\"color: navy\">, </span> e.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Composition'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">composition</span><span style=\"color: navy\">, </span> composition.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> e.fullUrl = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> composition.title = <span style=\"color: blue\">'Radiologieauftrag'</span><span style=\"color: navy\">, </span> composition.type<b> as </b><span style=\"color: maroon\">type</span><span style=\"color: navy\">, </span> type.coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'2161000195103'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'urn:oid:2.16.756.5.30.1.127.3.4'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Imaging order (record artifact)'</span><span style=\"color: navy\">, </span> composition.category<b> as </b><span style=\"color: maroon\">category</span><span style=\"color: navy\">, </span> category.coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'721963009'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://snomed.info/sct'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Order (record artifact)'</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">e2</span><span style=\"color: navy\">, </span> bundle.timestamp = <span style=\"color: navy\">(</span>now()<span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">timestamp</span><span style=\"color: navy\">, </span> bundle.type = <span style=\"color: blue\">'document'</span><span style=\"color: navy\">, </span> composition.date = <span style=\"color: maroon\">timestamp</span><span style=\"color: navy\">, </span> e2.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Patient'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span> patient.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid2</span><span style=\"color: navy\">, </span> e2.fullUrl = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid2<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">e4</span><span style=\"color: navy\">, </span> e4.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'QuestionnaireResponse'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">questionnaireresp</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>    qr<b> then </b>QuestionnaireResponseMap<span style=\"color: navy\">(</span><span style=\"color: maroon\">qr</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">questionnaireresp</span><span style=\"color: navy\">)</span> <i>\"questionnaireresp\"</i><span style=\"color: navy\">;</span>#xD;\n    qr<span style=\"color: navy\"><b> -&gt; </b></span> questionnaireresp.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid4</span><span style=\"color: navy\">, </span> e4.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">uuid4</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> bundle.entry<b> as </b><span style=\"color: maroon\">e5</span><span style=\"color: navy\">, </span> e5.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'ServiceRequest'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">servicerequest</span><span style=\"color: navy\">, </span> servicerequest.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid5</span><span style=\"color: navy\">, </span> e5.fullUrl = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid5<span style=\"color: navy\">)</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      qr<b> then </b>OrfComposition<span style=\"color: navy\">(</span><span style=\"color: maroon\">qr</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">composition</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">questionnaireresp</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">servicerequest</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">)</span> <i>\"composition\"</i><span style=\"color: navy\">;</span>#xD;\n      qr<b> then </b>QrToGroups<span style=\"color: navy\">(</span><span style=\"color: maroon\">questionnaireresp</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">composition</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">servicerequest</span><span style=\"color: navy\">)</span> <i>\"orf\"</i><span style=\"color: navy\">;</span>#xD;\n      qr<b> then </b>RadOrderQrToServiceRequest<span style=\"color: navy\">(</span><span style=\"color: maroon\">questionnaireresp</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">composition</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">servicerequest</span><span style=\"color: navy\">)</span> <i>\"servicerequest\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"servicerequest\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"orfbundle\"</i><span style=\"color: navy\">;</span>#xD;\n<span style=\"color: navy\">}#xD;\n#xD;\n</span><b>group </b>RadOrderQrToServiceRequest<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">qr</span><span style=\"color: navy\"> : </span>QuestionnaireResponse, <b>target</b> <span style=\"color: maroon\">patient</span><span style=\"color: navy\"> : </span>Patient, <b>target</b> <span style=\"color: maroon\">bundle</span><span style=\"color: navy\"> : </span>Bundle, <b>target</b> <span style=\"color: maroon\">composition</span><span style=\"color: navy\"> : </span>Composition, <b>target</b> <span style=\"color: maroon\">serviceRequest</span><span style=\"color: navy\"> : </span>ServiceRequest<span style=\"color: navy\">)</span><span style=\"color: navy\"> {#xD;\n</span>  qr.item<b> as </b><span style=\"color: maroon\">grp</span><b> where </b>linkId = 'requestedService'<b> then </b>RequestedServiceItems<span style=\"color: navy\">(</span><span style=\"color: maroon\">grp</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">serviceRequest</span><span style=\"color: navy\">)</span> <i>\"requestedService\"</i><span style=\"color: navy\">;</span>#xD;\n  qr.item<b> as </b><span style=\"color: maroon\">grp</span><b> where </b>linkId = 'reason'<b> then </b>ReasonServiceItems<span style=\"color: navy\">(</span><span style=\"color: maroon\">grp</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">serviceRequest</span><span style=\"color: navy\">)</span> <i>\"reason\"</i><span style=\"color: navy\">;</span>#xD;\n  qr.item<b> as </b><span style=\"color: maroon\">grp</span><b> where </b>linkId = 'imagingService'<b> then </b>ImagingServiceItems<span style=\"color: navy\">(</span><span style=\"color: maroon\">grp</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">serviceRequest</span><span style=\"color: navy\">)</span> <i>\"imagingService\"</i><span style=\"color: navy\">;</span>#xD;\n  qr.item<b> as </b><span style=\"color: maroon\">grp</span><b> where </b>linkId = 'orderDetail'<b> then </b>OrderDetailServiceItems<span style=\"color: navy\">(</span><span style=\"color: maroon\">grp</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">serviceRequest</span><span style=\"color: navy\">)</span> <i>\"orderDetail\"</i><span style=\"color: navy\">;</span>#xD;\n  qr.item<b> as </b><span style=\"color: maroon\">grp</span><b> where </b>linkId = 'desiredRadiologist'<b> then </b>DesiredRadiologistServiceItems<span style=\"color: navy\">(</span><span style=\"color: maroon\">grp</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">serviceRequest</span><span style=\"color: navy\">)</span> <i>\"desiredRadiologist\"</i><span style=\"color: navy\">;</span>#xD;\n  qr.item<b> as </b><span style=\"color: maroon\">grp</span><b> where </b>linkId = 'diagnosisList'<b> then </b>DiagnosisListServiceItems<span style=\"color: navy\">(</span><span style=\"color: maroon\">grp</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">serviceRequest</span><span style=\"color: navy\">)</span> <i>\"diagnosisList\"</i><span style=\"color: navy\">;</span>#xD;\n  qr.item<b> as </b><span style=\"color: maroon\">grp</span><b> where </b>linkId = 'caveat'<b> then </b>CaveatServiceItems<span style=\"color: navy\">(</span><span style=\"color: maroon\">grp</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">serviceRequest</span><span style=\"color: navy\">)</span> <i>\"Caveat\"</i><span style=\"color: navy\">;</span>#xD;\n  qr.item<b> as </b><span style=\"color: maroon\">grp</span><b> where </b>linkId = 'previousResults'<b> then</b><span style=\"color: navy\"> {#xD;\n</span>    grp.item<b> as </b><span style=\"color: maroon\">grp</span><b> where </b>linkId = 'attachedFile'<b> then </b>PreviousImagingStudyResultsNonDicom<span style=\"color: navy\">(</span><span style=\"color: maroon\">grp</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">serviceRequest</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">)</span> <i>\"attachment\"</i><span style=\"color: navy\">;</span>#xD;\n    grp.item<b> as </b><span style=\"color: maroon\">grp</span><b> where </b>linkId = 'dicomObject'<b> then </b>PreviousImagingStudyResults<span style=\"color: navy\">(</span><span style=\"color: maroon\">grp</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">serviceRequest</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">)</span> <i>\"attachment\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"previousResults\"</i><span style=\"color: navy\">;</span>#xD;\n<span style=\"color: navy\">}#xD;\n#xD;\n</span><b>group </b>RequestedServiceItems<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">src</span>, <b>target</b> <span style=\"color: maroon\">serviceRequest</span><span style=\"color: navy\"> : </span>ServiceRequest<span style=\"color: navy\">)</span><span style=\"color: navy\"> {#xD;\n</span>  src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>((linkId.value = 'requestedService.service') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>    item.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      answer.value<span style=\"color: navy\"> : </span>Coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\"><b> -&gt; </b></span> serviceRequest.category<b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">coding</span> <i>\"requestedServiceService\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"answerCalueCoding\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"itemAnswer\"</i><span style=\"color: navy\">;</span>#xD;\n<span style=\"color: navy\">}#xD;\n#xD;\n</span><b>group </b>ReasonServiceItems<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">src</span>, <b>target</b> <span style=\"color: maroon\">serviceRequest</span><span style=\"color: navy\"> : </span>ServiceRequest<span style=\"color: navy\">)</span><span style=\"color: navy\"> {#xD;\n</span>  src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>((linkId.value = 'reason.question') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>    item.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      answer.value<span style=\"color: navy\"> : </span>string<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span> serviceRequest.reasonCode<b> as </b><span style=\"color: maroon\">reasonCode</span><span style=\"color: navy\">, </span> reasonCode.text = <span style=\"color: maroon\">value</span> <i>\"reasonQuestion\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"answerValueString\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"itemAnswer\"</i><span style=\"color: navy\">;</span>#xD;\n<span style=\"color: navy\">}#xD;\n#xD;\n</span><b>group </b>ImagingServiceItems<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">src</span>, <b>target</b> <span style=\"color: maroon\">serviceRequest</span><span style=\"color: navy\"> : </span>ServiceRequest<span style=\"color: navy\">)</span><span style=\"color: navy\"> {#xD;\n</span>  src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>((linkId.value = 'imagingService.type') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>    item.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      answer.value<span style=\"color: navy\"> : </span>Coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\"><b> -&gt; </b></span> serviceRequest.code<b> as </b><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span> code.coding = <span style=\"color: maroon\">coding</span> <i>\"requestedServiceService\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"answerValueCoding\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"itemAnswer\"</i><span style=\"color: navy\">;</span>#xD;\n<span style=\"color: navy\">}#xD;\n#xD;\n</span><b>group </b>OrderDetailServiceItems<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">src</span>, <b>target</b> <span style=\"color: maroon\">serviceRequest</span><span style=\"color: navy\"> : </span>ServiceRequest<span style=\"color: navy\">)</span><span style=\"color: navy\"> {#xD;\n</span>  src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>((linkId.value = 'orderDetail.imagingRegion') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>    item.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      answer.value<span style=\"color: navy\"> : </span>Coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\"><b> -&gt; </b></span> serviceRequest.orderDetail<b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> cc.extension<b> as </b><span style=\"color: maroon\">ext</span><span style=\"color: navy\">, </span> ext.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-order-detail-type'</span><span style=\"color: navy\">, </span> ext.value = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/CodeSystem/ch-rad-order-order-detail-type'</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'imagingRegion'</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">coding</span> <i>\"orderDetailImagingRegion\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"answerValueCoding\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"itemAnswer\"</i><span style=\"color: navy\">;</span>#xD;\n  src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>((linkId.value = 'orderDetail.imagingFocus') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>    item.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      answer.value<span style=\"color: navy\"> : </span>Coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\"><b> -&gt; </b></span> serviceRequest.bodySite<b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">coding</span> <i>\"orderDetailImagingFocus\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"answerValueCoding\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"itemAnswer\"</i><span style=\"color: navy\">;</span>#xD;\n  src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>((linkId.value = 'orderDetail.laterality') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>    item.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      answer.value<span style=\"color: navy\"> : </span>Coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\"><b> -&gt; </b></span> serviceRequest.orderDetail<b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> cc.extension<b> as </b><span style=\"color: maroon\">ext</span><span style=\"color: navy\">, </span> ext.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-order-detail-type'</span><span style=\"color: navy\">, </span> ext.value = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/CodeSystem/ch-rad-order-order-detail-type'</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'laterality'</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">coding</span> <i>\"orderDetailLaterality\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"answerValueCoding\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"itemAnswer\"</i><span style=\"color: navy\">;</span>#xD;\n  src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>((linkId.value = 'orderDetail.viewType') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>    item.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      answer.value<span style=\"color: navy\"> : </span>Coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\"><b> -&gt; </b></span> serviceRequest.orderDetail<b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> cc.extension<b> as </b><span style=\"color: maroon\">ext</span><span style=\"color: navy\">, </span> ext.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-order-detail-type'</span><span style=\"color: navy\">, </span> ext.value = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/CodeSystem/ch-rad-order-order-detail-type'</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'viewType'</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">coding</span> <i>\"orderDetailViewType\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"answerValueCoding\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"itemAnswer\"</i><span style=\"color: navy\">;</span>#xD;\n  src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>((linkId.value = 'orderDetail.maneuverType') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>    item.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      answer.value<span style=\"color: navy\"> : </span>Coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\"><b> -&gt; </b></span> serviceRequest.orderDetail<b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> cc.extension<b> as </b><span style=\"color: maroon\">ext</span><span style=\"color: navy\">, </span> ext.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-order-detail-type'</span><span style=\"color: navy\">, </span> ext.value = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/CodeSystem/ch-rad-order-order-detail-type'</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'maneuverType'</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">coding</span> <i>\"orderDetailManeuverType\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"answerValueCoding\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"itemAnswer\"</i><span style=\"color: navy\">;</span>#xD;\n  src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>((linkId.value = 'orderDetail.guidanceForAction') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>    item.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      answer.value<span style=\"color: navy\"> : </span>Coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\"><b> -&gt; </b></span> serviceRequest.orderDetail<b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> cc.extension<b> as </b><span style=\"color: maroon\">ext</span><span style=\"color: navy\">, </span> ext.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-order-detail-type'</span><span style=\"color: navy\">, </span> ext.value = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/CodeSystem/ch-rad-order-order-detail-type'</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'guidanceForAction'</span><span style=\"color: navy\">, </span> cc.coding = <span style=\"color: maroon\">coding</span> <i>\"orderDetailGuidanceForAction\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"answerValueCoding\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"itemAnswer\"</i><span style=\"color: navy\">;</span>#xD;\n<span style=\"color: navy\">}#xD;\n#xD;\n</span><b>group </b>DesiredRadiologistServiceItems<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">src</span>, <b>target</b> <span style=\"color: maroon\">bundle</span><span style=\"color: navy\"> : </span>Bundle, <b>target</b> <span style=\"color: maroon\">serviceRequest</span><span style=\"color: navy\"> : </span>ServiceRequest<span style=\"color: navy\">)</span><span style=\"color: navy\"> {#xD;\n</span>  src<span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">e</span><span style=\"color: navy\">, </span> e.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Practitioner'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">practitioner</span><span style=\"color: navy\">, </span> practitioner.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> serviceRequest.performer<b> as </b><span style=\"color: maroon\">performer</span><span style=\"color: navy\">, </span> performer.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> e.fullUrl = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>    src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>((linkId.value = 'desiredRadiologist.familyName') and answer.exists())<span style=\"color: navy\"><b> -&gt; </b></span> practitioner.name<b> as </b><span style=\"color: maroon\">name</span> <b>share</b> <b>name</b><span style=\"color: navy\">, </span> name.family = <span style=\"color: navy\">(</span>%item.answer.value<span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>#xD;\n    src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>((linkId.value = 'desiredRadiologist.givenName') and answer.exists())<span style=\"color: navy\"><b> -&gt; </b></span> practitioner.name<b> as </b><span style=\"color: maroon\">name</span> <b>share</b> <b>name</b><span style=\"color: navy\">, </span> name.given = <span style=\"color: navy\">(</span>%item.answer.value<span style=\"color: navy\">)</span><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"serviceRequestPerformer\"</i><span style=\"color: navy\">;</span>#xD;\n<span style=\"color: navy\">}#xD;\n#xD;\n</span><b>group </b>DiagnosisListServiceItems<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">src</span>, <b>target</b> <span style=\"color: maroon\">patient</span><span style=\"color: navy\"> : </span>Patient, <b>target</b> <span style=\"color: maroon\">bundle</span><span style=\"color: navy\"> : </span>Bundle, <b>target</b> <span style=\"color: maroon\">serviceRequest</span><span style=\"color: navy\"> : </span>ServiceRequest<span style=\"color: navy\">)</span><span style=\"color: navy\"> {#xD;\n</span>  src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>((linkId.value = 'diagnosisList.primaryDiagnosis') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>    item.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      answer.value<span style=\"color: navy\"> : </span>string<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">e</span><span style=\"color: navy\">, </span> e.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Condition'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">condition</span><span style=\"color: navy\">, </span> condition.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> e.fullUrl = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> serviceRequest.reasonReference<b> as </b><span style=\"color: maroon\">reasonReference</span><span style=\"color: navy\">, </span> reasonReference.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> condition.category<b> as </b><span style=\"color: maroon\">category</span><span style=\"color: navy\">, </span> category.coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'problem-list-item'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/condition-category'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Problem List Item'</span><span style=\"color: navy\">, </span> condition.code<b> as </b><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span> code.text = <span style=\"color: maroon\">value</span><span style=\"color: navy\">, </span> condition.subject<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %patient.id<span style=\"color: navy\">)</span> <i>\"diagnosisListPrimaryDiagnosis\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"answerValueString\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"itemAnswer\"</i><span style=\"color: navy\">;</span>#xD;\n  src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>((linkId.value = 'diagnosisList.secondaryDiagnosis') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>    item.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      answer.value<span style=\"color: navy\"> : </span>string<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">e</span><span style=\"color: navy\">, </span> e.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Condition'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">condition</span><span style=\"color: navy\">, </span> condition.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> e.fullUrl = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> serviceRequest.supportingInfo<b> as </b><span style=\"color: maroon\">supportingInfo</span><span style=\"color: navy\">, </span> supportingInfo.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> condition.category<b> as </b><span style=\"color: maroon\">category</span><span style=\"color: navy\">, </span> category.coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'problem-list-item'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/condition-category'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Problem List Item'</span><span style=\"color: navy\">, </span> condition.code<b> as </b><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span> code.text = <span style=\"color: maroon\">value</span><span style=\"color: navy\">, </span> condition.subject<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %patient.id<span style=\"color: navy\">)</span> <i>\"diagnosisListSecondaryDiagnosis\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"answerValueString\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"itemAnswer\"</i><span style=\"color: navy\">;</span>#xD;\n  src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>((linkId.value = 'diagnosisList.bodyHeight') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>    item.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      answer.value<span style=\"color: navy\"> : </span>Quantity<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">e</span><span style=\"color: navy\">, </span> e.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">observation</span><span style=\"color: navy\">, </span> observation.status = <span style=\"color: blue\">'final'</span><span style=\"color: navy\">, </span> observation.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> e.fullUrl = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> observation.status = <span style=\"color: blue\">'final'</span><span style=\"color: navy\">, </span> serviceRequest.supportingInfo<b> as </b><span style=\"color: maroon\">supportingInfo</span><span style=\"color: navy\">, </span> supportingInfo.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> observation.category<b> as </b><span style=\"color: maroon\">category</span><span style=\"color: navy\">, </span> category.coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'vital-signs'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/observation-category'</span><span style=\"color: navy\">, </span> observation.value = <span style=\"color: maroon\">value</span><span style=\"color: navy\">, </span> observation.code<b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> cc.coding<b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://loinc.org'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'8302-2'</span><span style=\"color: navy\">, </span> observation.subject<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %patient.id<span style=\"color: navy\">)</span> <i>\"observationBodyHeight\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"answerValueString\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"itemAnswer\"</i><span style=\"color: navy\">;</span>#xD;\n  src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>((linkId.value = 'diagnosisList.bodyWeight') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>    item.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      answer.value<span style=\"color: navy\"> : </span>Quantity<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">e</span><span style=\"color: navy\">, </span> e.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">observation</span><span style=\"color: navy\">, </span> observation.status = <span style=\"color: blue\">'final'</span><span style=\"color: navy\">, </span> observation.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> observation.status = <span style=\"color: blue\">'final'</span><span style=\"color: navy\">, </span> e.fullUrl = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> serviceRequest.supportingInfo<b> as </b><span style=\"color: maroon\">supportingInfo</span><span style=\"color: navy\">, </span> supportingInfo.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> observation.category<b> as </b><span style=\"color: maroon\">category</span><span style=\"color: navy\">, </span> category.coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'vital-signs'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/observation-category'</span><span style=\"color: navy\">, </span> observation.value = <span style=\"color: maroon\">value</span><span style=\"color: navy\">, </span> observation.code<b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> cc.coding<b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://loinc.org'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'29463-7'</span><span style=\"color: navy\">, </span> observation.subject<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %patient.id<span style=\"color: navy\">)</span> <i>\"observationBbodyWeight\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"answerValueString\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"itemAnswer\"</i><span style=\"color: navy\">;</span>#xD;\n<span style=\"color: navy\">}#xD;\n#xD;\n</span><b>group </b>CaveatServiceItems<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">src</span>, <b>target</b> <span style=\"color: maroon\">patient</span><span style=\"color: navy\"> : </span>Patient, <b>target</b> <span style=\"color: maroon\">bundle</span><span style=\"color: navy\"> : </span>Bundle, <b>target</b> <span style=\"color: maroon\">serviceRequest</span><span style=\"color: navy\"> : </span>ServiceRequest<span style=\"color: navy\">)</span><span style=\"color: navy\"> {#xD;\n</span>  src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>((linkId.value = 'caveatList.bloodCoagulation') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>    item.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      answer.value<span style=\"color: navy\"> : </span>Coding<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">e</span><span style=\"color: navy\">, </span> e.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Condition'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">condition</span><span style=\"color: navy\">, </span> condition.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> e.fullUrl = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> serviceRequest.supportingInfo<b> as </b><span style=\"color: maroon\">supportingInfo</span><span style=\"color: navy\">, </span> supportingInfo.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> condition.extension<b> as </b><span style=\"color: maroon\">ext1</span><span style=\"color: navy\">, </span> ext1.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-caveat-type'</span><span style=\"color: navy\">, </span> ext1.value = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'64779008'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://snomed.info/sct'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Blood coagulation disorder (disorder)'</span><span style=\"color: navy\">, </span> condition.extension<b> as </b><span style=\"color: maroon\">ext2</span><span style=\"color: navy\">, </span> ext2.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-qualifier-value'</span><span style=\"color: navy\">, </span> ext2.value = <span style=\"color: maroon\">value</span><span style=\"color: navy\">, </span> condition.category<b> as </b><span style=\"color: maroon\">category</span><span style=\"color: navy\">, </span> category.coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'problem-list-item'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/condition-category'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Problem List Item'</span><span style=\"color: navy\">, </span> condition.code<b> as </b><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span> code.coding<b> as </b><span style=\"color: maroon\">coding2</span><span style=\"color: navy\">, </span> coding2.code = <span style=\"color: blue\">'64779008'</span><span style=\"color: navy\">, </span> coding2.system = <span style=\"color: blue\">'http://snomed.info/sct'</span><span style=\"color: navy\">, </span> coding2.display = <span style=\"color: blue\">'Blood coagulation disorder (disorder)'</span><span style=\"color: navy\">, </span> condition.subject<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %patient.id<span style=\"color: navy\">)</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>        answer.item<b> as </b><span style=\"color: maroon\">subitem</span><b> where </b>(linkId.value = 'caveatList.bloodCoagulation.INR')<span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">e</span><span style=\"color: navy\">, </span> e.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">observation</span><span style=\"color: navy\">, </span> observation.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> observation.status = <span style=\"color: blue\">'final'</span><span style=\"color: navy\">, </span> e.fullUrl = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> condition.evidence<b> as </b><span style=\"color: maroon\">evidence</span><span style=\"color: navy\">, </span> evidence.detail<b> as </b><span style=\"color: maroon\">detail</span><span style=\"color: navy\">, </span> detail.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> observation.code<b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> cc.coding<b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://loinc.org'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'34714-6'</span><span style=\"color: navy\">, </span> observation.subject<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %patient.id<span style=\"color: navy\">)</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>          subitem.item<b> as </b><span style=\"color: maroon\">quantityitem</span><b> where </b>((linkId.value = 'caveatList.bloodCoagulation.INR.quantity') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>            quantityitem.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>              answer.value<span style=\"color: navy\"> : </span>Quantity<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span>observation.value = <span style=\"color: maroon\">value</span><span style=\"color: navy\">;</span>#xD;\n            <span style=\"color: navy\">}</span> <i>\"caveatBloodCoagulationINRQuantityValue\"</i><span style=\"color: navy\">;</span>#xD;\n          <span style=\"color: navy\">}</span> <i>\"caveatBloodCoagulationINRQuantity\"</i><span style=\"color: navy\">;</span>#xD;\n          subitem.item<b> as </b><span style=\"color: maroon\">datetimeitem</span><b> where </b>((linkId.value = 'caveatList.bloodCoagulation.INR.dateTime') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>            datetimeitem.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>              answer.value<span style=\"color: navy\"> : </span>dateTime<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span>observation.effective = <span style=\"color: maroon\">value</span><span style=\"color: navy\">;</span>#xD;\n            <span style=\"color: navy\">}</span> <i>\"caveatBloodCoagulationINRDateTimeValue\"</i><span style=\"color: navy\">;</span>#xD;\n          <span style=\"color: navy\">}</span> <i>\"caveatBloodCoagulationINRDateTime\"</i><span style=\"color: navy\">;</span>#xD;\n        <span style=\"color: navy\">}</span> <i>\"caveatBloodCoagulationINR\"</i><span style=\"color: navy\">;</span>#xD;\n        answer.item<b> as </b><span style=\"color: maroon\">subitem</span><b> where </b>(linkId.value = 'caveatList.bloodCoagulation.platelets')<span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">e</span><span style=\"color: navy\">, </span> e.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">observation</span><span style=\"color: navy\">, </span> observation.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> observation.status = <span style=\"color: blue\">'final'</span><span style=\"color: navy\">, </span> e.fullUrl = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> condition.evidence<b> as </b><span style=\"color: maroon\">evidence</span><span style=\"color: navy\">, </span> evidence.detail<b> as </b><span style=\"color: maroon\">detail</span><span style=\"color: navy\">, </span> detail.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> observation.code<b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> cc.coding<b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://loinc.org'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'26515-7'</span><span style=\"color: navy\">, </span> observation.subject<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %patient.id<span style=\"color: navy\">)</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>          subitem.item<b> as </b><span style=\"color: maroon\">quantityitem</span><b> where </b>((linkId.value = 'caveatList.bloodCoagulation.platelets.quantity') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>            quantityitem.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>              answer.value<span style=\"color: navy\"> : </span>Quantity<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span>observation.value = <span style=\"color: maroon\">value</span><span style=\"color: navy\">;</span>#xD;\n            <span style=\"color: navy\">}</span> <i>\"caveatBloodCoagulationINRPlateletsValue\"</i><span style=\"color: navy\">;</span>#xD;\n          <span style=\"color: navy\">}</span> <i>\"caveatBloodCoagulationINRPlatelets\"</i><span style=\"color: navy\">;</span>#xD;\n          subitem.item<b> as </b><span style=\"color: maroon\">datetimeitem</span><b> where </b>((linkId.value = 'caveatList.bloodCoagulation.platelets.dateTime') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>            datetimeitem.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>              answer.value<span style=\"color: navy\"> : </span>dateTime<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span>observation.effective = <span style=\"color: maroon\">value</span><span style=\"color: navy\">;</span>#xD;\n            <span style=\"color: navy\">}</span> <i>\"caveatBloodCoagulationINRPlateletsValue\"</i><span style=\"color: navy\">;</span>#xD;\n          <span style=\"color: navy\">}</span> <i>\"caveatBloodCoagulationINRPlatelets\"</i><span style=\"color: navy\">;</span>#xD;\n        <span style=\"color: navy\">}</span> <i>\"caveatBloodCoagulationINR\"</i><span style=\"color: navy\">;</span>#xD;\n      <span style=\"color: navy\">}</span> <i>\"bloodCoagulation\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"answerValueString\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"itemAnswer\"</i><span style=\"color: navy\">;</span>#xD;\n  src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>((linkId.value = 'caveatList.renalInsufficiency') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>    item.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      answer.value<span style=\"color: navy\"> : </span>Coding<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">e</span><span style=\"color: navy\">, </span> e.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Condition'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">condition</span><span style=\"color: navy\">, </span> condition.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> e.fullUrl = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> serviceRequest.supportingInfo<b> as </b><span style=\"color: maroon\">supportingInfo</span><span style=\"color: navy\">, </span> supportingInfo.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> condition.extension<b> as </b><span style=\"color: maroon\">ext1</span><span style=\"color: navy\">, </span> ext1.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-caveat-type'</span><span style=\"color: navy\">, </span> ext1.value = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'723188008'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://snomed.info/sct'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Renal insufficiency (disorder)'</span><span style=\"color: navy\">, </span> condition.extension<b> as </b><span style=\"color: maroon\">ext2</span><span style=\"color: navy\">, </span> ext2.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-qualifier-value'</span><span style=\"color: navy\">, </span> ext2.value = <span style=\"color: maroon\">value</span><span style=\"color: navy\">, </span> condition.category<b> as </b><span style=\"color: maroon\">category</span><span style=\"color: navy\">, </span> category.coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'problem-list-item'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/condition-category'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Problem List Item'</span><span style=\"color: navy\">, </span> condition.code<b> as </b><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span> code.coding<b> as </b><span style=\"color: maroon\">coding2</span><span style=\"color: navy\">, </span> coding2.code = <span style=\"color: blue\">'723188008'</span><span style=\"color: navy\">, </span> coding2.system = <span style=\"color: blue\">'http://snomed.info/sct'</span><span style=\"color: navy\">, </span> coding2.display = <span style=\"color: blue\">'Renal insufficiency (disorder)'</span><span style=\"color: navy\">, </span> condition.subject<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %patient.id<span style=\"color: navy\">)</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>        answer.item<b> as </b><span style=\"color: maroon\">subitem</span><b> where </b>(linkId.value = 'caveatList.renalInsufficiency.creatinineClearance')<span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">e</span><span style=\"color: navy\">, </span> e.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">observation</span><span style=\"color: navy\">, </span> observation.status = <span style=\"color: blue\">'final'</span><span style=\"color: navy\">, </span> observation.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> e.fullUrl = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> condition.evidence<b> as </b><span style=\"color: maroon\">evidence</span><span style=\"color: navy\">, </span> evidence.detail<b> as </b><span style=\"color: maroon\">detail</span><span style=\"color: navy\">, </span> detail.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> observation.code<b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> cc.coding<b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://loinc.org'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'33558-8'</span><span style=\"color: navy\">, </span> observation.subject<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %patient.id<span style=\"color: navy\">)</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>          subitem.item<b> as </b><span style=\"color: maroon\">quantityitem</span><b> where </b>((linkId.value = 'caveatList.renalInsufficiency.creatinineClearance.quantity') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>            quantityitem.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>              answer.value<span style=\"color: navy\"> : </span>Quantity<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span>observation.value = <span style=\"color: maroon\">value</span><span style=\"color: navy\">;</span>#xD;\n            <span style=\"color: navy\">}</span> <i>\"caveatListRenalInsufficiencyCreatinineClearanceQuantityValue\"</i><span style=\"color: navy\">;</span>#xD;\n          <span style=\"color: navy\">}</span> <i>\"caveatListRenalInsufficiencyCreatinineClearanceQuantity\"</i><span style=\"color: navy\">;</span>#xD;\n          subitem.item<b> as </b><span style=\"color: maroon\">datetimeitem</span><b> where </b>((linkId.value = 'caveatList.renalInsufficiency.creatinineClearance.dateTime') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>            datetimeitem.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>              answer.value<span style=\"color: navy\"> : </span>dateTime<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span>observation.effective = <span style=\"color: maroon\">value</span><span style=\"color: navy\">;</span>#xD;\n            <span style=\"color: navy\">}</span> <i>\"caveatListRenalInsufficiencyCreatinineClearanceDateTimeValue\"</i><span style=\"color: navy\">;</span>#xD;\n          <span style=\"color: navy\">}</span> <i>\"caveatListRenalInsufficiencyCreatinineClearancedateTime\"</i><span style=\"color: navy\">;</span>#xD;\n        <span style=\"color: navy\">}</span> <i>\"caveatListRenalInsufficiencyCreatinineClearanceINR\"</i><span style=\"color: navy\">;</span>#xD;\n        answer.item<b> as </b><span style=\"color: maroon\">subitem</span><b> where </b>(linkId.value = 'caveatList.renalInsufficiency.creatinine')<span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">e</span><span style=\"color: navy\">, </span> e.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Observation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">observation</span><span style=\"color: navy\">, </span> observation.status = <span style=\"color: blue\">'final'</span><span style=\"color: navy\">, </span> observation.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> e.fullUrl = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> condition.evidence<b> as </b><span style=\"color: maroon\">evidence</span><span style=\"color: navy\">, </span> evidence.detail<b> as </b><span style=\"color: maroon\">detail</span><span style=\"color: navy\">, </span> detail.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> observation.code<b> as </b><span style=\"color: maroon\">cc</span><span style=\"color: navy\">, </span> cc.coding<b> as </b><span style=\"color: maroon\">c</span><span style=\"color: navy\">, </span> c.system = <span style=\"color: blue\">'http://loinc.org'</span><span style=\"color: navy\">, </span> c.code = <span style=\"color: blue\">'77140-2'</span><span style=\"color: navy\">, </span> observation.subject<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %patient.id<span style=\"color: navy\">)</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>          subitem.item<b> as </b><span style=\"color: maroon\">quantityitem</span><b> where </b>((linkId.value = 'caveatList.renalInsufficiency.creatinine.quantity') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>            quantityitem.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>              answer.value<span style=\"color: navy\"> : </span>Quantity<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span>observation.value = <span style=\"color: maroon\">value</span><span style=\"color: navy\">;</span>#xD;\n            <span style=\"color: navy\">}</span> <i>\"caveatListRenalInsufficiencyCreatinineValue\"</i><span style=\"color: navy\">;</span>#xD;\n          <span style=\"color: navy\">}</span> <i>\"caveatListRenalInsufficiencyCreatinine\"</i><span style=\"color: navy\">;</span>#xD;\n          subitem.item<b> as </b><span style=\"color: maroon\">datetimeitem</span><b> where </b>((linkId.value = 'caveatList.renalInsufficiency.creatinine.dateTime') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>            datetimeitem.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>              answer.value<span style=\"color: navy\"> : </span>dateTime<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span>observation.effective = <span style=\"color: maroon\">value</span><span style=\"color: navy\">;</span>#xD;\n            <span style=\"color: navy\">}</span> <i>\"caveatListRenalInsufficiencyCreatininevalue\"</i><span style=\"color: navy\">;</span>#xD;\n          <span style=\"color: navy\">}</span> <i>\"caveatBloodCoagulationINRPlatelets\"</i><span style=\"color: navy\">;</span>#xD;\n        <span style=\"color: navy\">}</span> <i>\"caveatListRenalInsufficiencyCreatinine\"</i><span style=\"color: navy\">;</span>#xD;\n      <span style=\"color: navy\">}</span> <i>\"bloodCoagulation\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"answerValueString\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"itemAnswer\"</i><span style=\"color: navy\">;</span>#xD;\n  src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>((linkId.value = 'caveatList.claustrophobia') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>    item.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      answer.value<span style=\"color: navy\"> : </span>Coding<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">e</span><span style=\"color: navy\">, </span> e.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Condition'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">condition</span><span style=\"color: navy\">, </span> condition.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> e.fullUrl = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> serviceRequest.supportingInfo<b> as </b><span style=\"color: maroon\">supportingInfo</span><span style=\"color: navy\">, </span> supportingInfo.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> condition.extension<b> as </b><span style=\"color: maroon\">ext1</span><span style=\"color: navy\">, </span> ext1.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-caveat-type'</span><span style=\"color: navy\">, </span> ext1.value = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'19887002'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://snomed.info/sct'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Claustrophobia (finding)'</span><span style=\"color: navy\">, </span> condition.extension<b> as </b><span style=\"color: maroon\">ext2</span><span style=\"color: navy\">, </span> ext2.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-qualifier-value'</span><span style=\"color: navy\">, </span> ext2.value = <span style=\"color: maroon\">value</span><span style=\"color: navy\">, </span> condition.category<b> as </b><span style=\"color: maroon\">category</span><span style=\"color: navy\">, </span> category.coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'problem-list-item'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/condition-category'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Problem List Item'</span><span style=\"color: navy\">, </span> condition.code<b> as </b><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span> code.coding<b> as </b><span style=\"color: maroon\">coding2</span><span style=\"color: navy\">, </span> coding2.code = <span style=\"color: blue\">'19887002'</span><span style=\"color: navy\">, </span> coding2.system = <span style=\"color: blue\">'http://snomed.info/sct'</span><span style=\"color: navy\">, </span> coding2.display = <span style=\"color: blue\">'Claustrophobia (finding)'</span><span style=\"color: navy\">, </span> condition.subject<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %patient.id<span style=\"color: navy\">)</span> <i>\"caveatListClaustrophobia\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"answerValueString\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"itemAnswer\"</i><span style=\"color: navy\">;</span>#xD;\n  src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>((linkId.value = 'caveatList.bodyPiercing') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>    item.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      answer.value<span style=\"color: navy\"> : </span>Coding<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">e</span><span style=\"color: navy\">, </span> e.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Condition'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">condition</span><span style=\"color: navy\">, </span> condition.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> e.fullUrl = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> serviceRequest.supportingInfo<b> as </b><span style=\"color: maroon\">supportingInfo</span><span style=\"color: navy\">, </span> supportingInfo.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> condition.extension<b> as </b><span style=\"color: maroon\">ext1</span><span style=\"color: navy\">, </span> ext1.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-caveat-type'</span><span style=\"color: navy\">, </span> ext1.value = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'879862001'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://snomed.info/sct'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Body piercing (finding)'</span><span style=\"color: navy\">, </span> condition.extension<b> as </b><span style=\"color: maroon\">ext2</span><span style=\"color: navy\">, </span> ext2.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-qualifier-value'</span><span style=\"color: navy\">, </span> ext2.value = <span style=\"color: maroon\">value</span><span style=\"color: navy\">, </span> condition.category<b> as </b><span style=\"color: maroon\">category</span><span style=\"color: navy\">, </span> category.coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'problem-list-item'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/condition-category'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Problem List Item'</span><span style=\"color: navy\">, </span> condition.code<b> as </b><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span> code.coding<b> as </b><span style=\"color: maroon\">coding2</span><span style=\"color: navy\">, </span> coding2.code = <span style=\"color: blue\">'879862001'</span><span style=\"color: navy\">, </span> coding2.system = <span style=\"color: blue\">'http://snomed.info/sct'</span><span style=\"color: navy\">, </span> coding2.display = <span style=\"color: blue\">'Body piercing (finding)'</span><span style=\"color: navy\">, </span> condition.subject<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %patient.id<span style=\"color: navy\">)</span> <i>\"caveatListBodyPiercing\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"answerValueString\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"itemAnswer\"</i><span style=\"color: navy\">;</span>#xD;\n  src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>((linkId.value = 'caveatList.device') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>    item.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      answer.value<span style=\"color: navy\"> : </span>Coding<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">e</span><span style=\"color: navy\">, </span> e.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Condition'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">condition</span><span style=\"color: navy\">, </span> condition.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> e.fullUrl = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> serviceRequest.supportingInfo<b> as </b><span style=\"color: maroon\">supportingInfo</span><span style=\"color: navy\">, </span> supportingInfo.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> condition.extension<b> as </b><span style=\"color: maroon\">ext1</span><span style=\"color: navy\">, </span> ext1.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-caveat-type'</span><span style=\"color: navy\">, </span> ext1.value = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'397578001'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://snomed.info/sct'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Device in situ (finding)'</span><span style=\"color: navy\">, </span> condition.extension<b> as </b><span style=\"color: maroon\">ext2</span><span style=\"color: navy\">, </span> ext2.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-qualifier-value'</span><span style=\"color: navy\">, </span> ext2.value = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'52101004'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://snomed.info/sct'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Present (qualifier value)'</span><span style=\"color: navy\">, </span> condition.category<b> as </b><span style=\"color: maroon\">category</span><span style=\"color: navy\">, </span> category.coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'problem-list-item'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/condition-category'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Problem List Item'</span><span style=\"color: navy\">, </span> condition.code<b> as </b><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span> code.coding = <span style=\"color: maroon\">value</span><span style=\"color: navy\">, </span> condition.subject<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %patient.id<span style=\"color: navy\">)</span> <i>\"caveatListDevice\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"answerValueString\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"itemAnswer\"</i><span style=\"color: navy\">;</span>#xD;\n  src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>((linkId.value = 'caveatList.hyperthyroidism') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>    item.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      answer.value<span style=\"color: navy\"> : </span>Coding<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">e</span><span style=\"color: navy\">, </span> e.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Condition'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">condition</span><span style=\"color: navy\">, </span> condition.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> e.fullUrl = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> serviceRequest.supportingInfo<b> as </b><span style=\"color: maroon\">supportingInfo</span><span style=\"color: navy\">, </span> supportingInfo.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> condition.extension<b> as </b><span style=\"color: maroon\">ext1</span><span style=\"color: navy\">, </span> ext1.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-caveat-type'</span><span style=\"color: navy\">, </span> ext1.value = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'34486009'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://snomed.info/sct'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Hyperthyroidism (disorder)'</span><span style=\"color: navy\">, </span> condition.extension<b> as </b><span style=\"color: maroon\">ext2</span><span style=\"color: navy\">, </span> ext2.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-qualifier-value'</span><span style=\"color: navy\">, </span> ext2.value = <span style=\"color: maroon\">value</span><span style=\"color: navy\">, </span> condition.category<b> as </b><span style=\"color: maroon\">category</span><span style=\"color: navy\">, </span> category.coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'problem-list-item'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/condition-category'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Problem List Item'</span><span style=\"color: navy\">, </span> condition.code<b> as </b><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span> code.coding<b> as </b><span style=\"color: maroon\">coding2</span><span style=\"color: navy\">, </span> coding2.code = <span style=\"color: blue\">'34486009'</span><span style=\"color: navy\">, </span> coding2.system = <span style=\"color: blue\">'http://snomed.info/sct'</span><span style=\"color: navy\">, </span> coding2.display = <span style=\"color: blue\">'Hyperthyroidism (disorder)'</span><span style=\"color: navy\">, </span> condition.subject<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %patient.id<span style=\"color: navy\">)</span> <i>\"caveatListHyperthyroidism\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"answerValueString\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"itemAnswer\"</i><span style=\"color: navy\">;</span>#xD;\n  src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>((linkId.value = 'caveatList.diabetes') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>    item.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      answer.value<span style=\"color: navy\"> : </span>Coding<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">e</span><span style=\"color: navy\">, </span> e.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Condition'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">condition</span><span style=\"color: navy\">, </span> condition.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> e.fullUrl = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> serviceRequest.supportingInfo<b> as </b><span style=\"color: maroon\">supportingInfo</span><span style=\"color: navy\">, </span> supportingInfo.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> condition.extension<b> as </b><span style=\"color: maroon\">ext1</span><span style=\"color: navy\">, </span> ext1.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-caveat-type'</span><span style=\"color: navy\">, </span> ext1.value = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'73211009'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://snomed.info/sct'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Diabetes mellitus (disorder)'</span><span style=\"color: navy\">, </span> condition.extension<b> as </b><span style=\"color: maroon\">ext2</span><span style=\"color: navy\">, </span> ext2.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-qualifier-value'</span><span style=\"color: navy\">, </span> ext2.value = <span style=\"color: maroon\">value</span><span style=\"color: navy\">, </span> condition.category<b> as </b><span style=\"color: maroon\">category</span><span style=\"color: navy\">, </span> category.coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'problem-list-item'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/condition-category'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Problem List Item'</span><span style=\"color: navy\">, </span> condition.code<b> as </b><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span> code.coding<b> as </b><span style=\"color: maroon\">coding2</span><span style=\"color: navy\">, </span> coding2.code = <span style=\"color: blue\">'73211009'</span><span style=\"color: navy\">, </span> coding2.system = <span style=\"color: blue\">'http://snomed.info/sct'</span><span style=\"color: navy\">, </span> coding2.display = <span style=\"color: blue\">'Diabetes mellitus (disorder)'</span><span style=\"color: navy\">, </span> condition.subject<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %patient.id<span style=\"color: navy\">)</span> <i>\"caveatListDiabetes\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"answerValueString\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"itemAnswer\"</i><span style=\"color: navy\">;</span>#xD;\n  src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>((linkId.value = 'caveatList.gravida') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>    item.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      answer.value<span style=\"color: navy\"> : </span>Coding<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">e</span><span style=\"color: navy\">, </span> e.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Condition'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">condition</span><span style=\"color: navy\">, </span> condition.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> e.fullUrl = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> serviceRequest.supportingInfo<b> as </b><span style=\"color: maroon\">supportingInfo</span><span style=\"color: navy\">, </span> supportingInfo.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> condition.extension<b> as </b><span style=\"color: maroon\">ext1</span><span style=\"color: navy\">, </span> ext1.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-caveat-type'</span><span style=\"color: navy\">, </span> ext1.value = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'366321006'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://snomed.info/sct'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Finding of gravida (finding)'</span><span style=\"color: navy\">, </span> condition.extension<b> as </b><span style=\"color: maroon\">ext2</span><span style=\"color: navy\">, </span> ext2.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-qualifier-value'</span><span style=\"color: navy\">, </span> ext2.value = <span style=\"color: maroon\">value</span><span style=\"color: navy\">, </span> condition.category<b> as </b><span style=\"color: maroon\">category</span><span style=\"color: navy\">, </span> category.coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'problem-list-item'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/condition-category'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Problem List Item'</span><span style=\"color: navy\">, </span> condition.code<b> as </b><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span> code.coding<b> as </b><span style=\"color: maroon\">coding2</span><span style=\"color: navy\">, </span> coding2.code = <span style=\"color: blue\">'366321006'</span><span style=\"color: navy\">, </span> coding2.system = <span style=\"color: blue\">'http://snomed.info/sct'</span><span style=\"color: navy\">, </span> coding2.display = <span style=\"color: blue\">'Finding of gravida (finding)'</span><span style=\"color: navy\">, </span> condition.subject<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %patient.id<span style=\"color: navy\">)</span> <i>\"caveatListGravida\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"answerValueString\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"itemAnswer\"</i><span style=\"color: navy\">;</span>#xD;\n  src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>((linkId.value = 'caveatList.contrastMediaAllergy') and answer.exists())<b> then</b><span style=\"color: navy\"> {#xD;\n</span>    item.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      answer.value<span style=\"color: navy\"> : </span>Coding<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">e</span><span style=\"color: navy\">, </span> e.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Condition'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">condition</span><span style=\"color: navy\">, </span> condition.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> e.fullUrl = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> serviceRequest.supportingInfo<b> as </b><span style=\"color: maroon\">supportingInfo</span><span style=\"color: navy\">, </span> supportingInfo.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> condition.extension<b> as </b><span style=\"color: maroon\">ext1</span><span style=\"color: navy\">, </span> ext1.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-caveat-type'</span><span style=\"color: navy\">, </span> ext1.value = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'293637006'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://snomed.info/sct'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Allergy to contrast media (finding)'</span><span style=\"color: navy\">, </span> condition.extension<b> as </b><span style=\"color: maroon\">ext2</span><span style=\"color: navy\">, </span> ext2.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-qualifier-value'</span><span style=\"color: navy\">, </span> ext2.value = <span style=\"color: maroon\">value</span><span style=\"color: navy\">, </span> condition.category<b> as </b><span style=\"color: maroon\">category</span><span style=\"color: navy\">, </span> category.coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'problem-list-item'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/condition-category'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Problem List Item'</span><span style=\"color: navy\">, </span> condition.code<b> as </b><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span> code.coding<b> as </b><span style=\"color: maroon\">coding2</span><span style=\"color: navy\">, </span> coding2.code = <span style=\"color: blue\">'293637006'</span><span style=\"color: navy\">, </span> coding2.system = <span style=\"color: blue\">'http://snomed.info/sct'</span><span style=\"color: navy\">, </span> coding2.display = <span style=\"color: blue\">'Allergy to contrast media (finding)'</span><span style=\"color: navy\">, </span> condition.subject<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %patient.id<span style=\"color: navy\">)</span> <i>\"caveatListContrastMediaAllergy\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"answerValueString\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"itemAnswer\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">// </span><span style=\"color: green\">\"caveatListDrugPrescription.metformin\"</span>#xD;\n  <span style=\"color: navy\">// </span><span style=\"color: green\">caveatList.drugPrescription.betaBlocke</span>#xD;\n  src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>(linkId.value = 'caveatList.drugPrescription')<b> then </b>DesiredRadiologistServiceItemsDrugDescription<span style=\"color: navy\">(</span><span style=\"color: maroon\">item</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">bundle</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">serviceRequest</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">)</span> <i>\"DrugPrescription\"</i><span style=\"color: navy\">;</span>#xD;\n<span style=\"color: navy\">}#xD;\n#xD;\n</span><b>group </b>DesiredRadiologistServiceItemsDrugDescription<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">src</span>, <b>target</b> <span style=\"color: maroon\">bundle</span><span style=\"color: navy\"> : </span>Bundle, <b>target</b> <span style=\"color: maroon\">serviceRequest</span><span style=\"color: navy\"> : </span>ServiceRequest, <b>target</b> <span style=\"color: maroon\">patient</span><span style=\"color: navy\"> : </span>Patient<span style=\"color: navy\">)</span><span style=\"color: navy\"> {#xD;\n</span>  src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>(linkId.value = 'caveatList.drugPrescription.metformin')<b> then</b><span style=\"color: navy\"> {#xD;\n</span>    item.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      answer.value<span style=\"color: navy\"> : </span>Coding<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">e</span><span style=\"color: navy\">, </span> e.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Condition'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">condition</span><span style=\"color: navy\">, </span> condition.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> e.fullUrl = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> serviceRequest.supportingInfo<b> as </b><span style=\"color: maroon\">supportingInfo</span><span style=\"color: navy\">, </span> supportingInfo.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> condition.extension<b> as </b><span style=\"color: maroon\">ext1</span><span style=\"color: navy\">, </span> ext1.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-caveat-type'</span><span style=\"color: navy\">, </span> ext1.value = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'182817000'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://snomed.info/sct'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Drug prescription (situation)'</span><span style=\"color: navy\">, </span> condition.extension<b> as </b><span style=\"color: maroon\">ext2</span><span style=\"color: navy\">, </span> ext2.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-qualifier-value'</span><span style=\"color: navy\">, </span> ext2.value = <span style=\"color: maroon\">value</span><span style=\"color: navy\">, </span> condition.category<b> as </b><span style=\"color: maroon\">category</span><span style=\"color: navy\">, </span> category.coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'problem-list-item'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/condition-category'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Problem List Item'</span><span style=\"color: navy\">, </span> condition.code<b> as </b><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span> code.coding<b> as </b><span style=\"color: maroon\">coding2</span><span style=\"color: navy\">, </span> coding2.code = <span style=\"color: blue\">'372567009'</span><span style=\"color: navy\">, </span> coding2.system = <span style=\"color: blue\">'http://snomed.info/sct'</span><span style=\"color: navy\">, </span> coding2.display = <span style=\"color: blue\">'Metformin (substance)'</span><span style=\"color: navy\">, </span> condition.subject<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %patient.id<span style=\"color: navy\">)</span> <i>\"caveatListDrugPrescription\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"answerValueString\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"caveatListDrugPrescriptionMetformin\"</i><span style=\"color: navy\">;</span>#xD;\n  src.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>(linkId.value = 'caveatList.drugPrescription.betaBlocker')<b> then</b><span style=\"color: navy\"> {#xD;\n</span>    item.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      answer.value<span style=\"color: navy\"> : </span>Coding<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">e</span><span style=\"color: navy\">, </span> e.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Condition'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">condition</span><span style=\"color: navy\">, </span> condition.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> e.fullUrl = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> serviceRequest.supportingInfo<b> as </b><span style=\"color: maroon\">supportingInfo</span><span style=\"color: navy\">, </span> supportingInfo.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> condition.extension<b> as </b><span style=\"color: maroon\">ext1</span><span style=\"color: navy\">, </span> ext1.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-caveat-type'</span><span style=\"color: navy\">, </span> ext1.value = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Coding'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'182817000'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://snomed.info/sct'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Drug prescription (situation)'</span><span style=\"color: navy\">, </span> condition.extension<b> as </b><span style=\"color: maroon\">ext2</span><span style=\"color: navy\">, </span> ext2.url = <span style=\"color: blue\">'http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-qualifier-value'</span><span style=\"color: navy\">, </span> ext2.value = <span style=\"color: maroon\">value</span><span style=\"color: navy\">, </span> condition.category<b> as </b><span style=\"color: maroon\">category</span><span style=\"color: navy\">, </span> category.coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'problem-list-item'</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/condition-category'</span><span style=\"color: navy\">, </span> coding.display = <span style=\"color: blue\">'Problem List Item'</span><span style=\"color: navy\">, </span> condition.code<b> as </b><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span> code.coding<b> as </b><span style=\"color: maroon\">coding2</span><span style=\"color: navy\">, </span> coding2.code = <span style=\"color: blue\">'373254001'</span><span style=\"color: navy\">, </span> coding2.system = <span style=\"color: blue\">'http://snomed.info/sct'</span><span style=\"color: navy\">, </span> coding2.display = <span style=\"color: blue\">'Substance with beta adrenergic receptor antagonist mechanism of action (substance)'</span><span style=\"color: navy\">, </span> condition.subject<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %patient.id<span style=\"color: navy\">)</span> <i>\"caveatListDrugPrescription\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"answerValueString\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"caveatListDrugPrescriptionBetaBlocker\"</i><span style=\"color: navy\">;</span>#xD;\n<span style=\"color: navy\">}#xD;\n#xD;\n</span><b>group </b>PreviousImagingStudyResultsNonDicom<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">item</span>, <b>target</b> <span style=\"color: maroon\">bundle</span><span style=\"color: navy\"> : </span>Bundle, <b>target</b> <span style=\"color: maroon\">serviceRequest</span><span style=\"color: navy\"> : </span>ServiceRequest, <b>target</b> <span style=\"color: maroon\">patient</span><span style=\"color: navy\"> : </span>Patient<span style=\"color: navy\">)</span><span style=\"color: navy\"> {#xD;\n</span>  item<b> as </b><span style=\"color: maroon\">item</span><span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">e</span><span style=\"color: navy\">, </span> e.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'DocumentReference'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">documentReference</span><span style=\"color: navy\">, </span> documentReference.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> documentReference.subject<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %patient.id<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> e.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> documentReference.status = <span style=\"color: blue\">'current'</span><span style=\"color: navy\">, </span> serviceRequest.supportingInfo<b> as </b><span style=\"color: maroon\">supportingInfo</span><span style=\"color: navy\">, </span> supportingInfo.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>    item.answer<b> as </b><span style=\"color: maroon\">answer</span><span style=\"color: navy\"><b> -&gt; </b></span> documentReference.content<b> as </b><span style=\"color: maroon\">content</span><span style=\"color: navy\">, </span> content.attachment = <span style=\"color: navy\">(</span>%answer.value<span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">attachment</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      answer.item<b> as </b><span style=\"color: maroon\">dictomitem</span><b> where </b>((linkId.value = 'attachedFile.description') and answer.exists())<span style=\"color: navy\"><b> -&gt; </b></span>documentReference.description = <span style=\"color: navy\">(</span>%dictomitem.answer.value<span style=\"color: navy\">)</span> <i>\"description\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"answerValueString\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"itemAnswer\"</i><span style=\"color: navy\">;</span>#xD;\n<span style=\"color: navy\">}#xD;\n#xD;\n</span><b>group </b>PreviousImagingStudyResults<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">item</span>, <b>target</b> <span style=\"color: maroon\">bundle</span><span style=\"color: navy\"> : </span>Bundle, <b>target</b> <span style=\"color: maroon\">serviceRequest</span><span style=\"color: navy\"> : </span>ServiceRequest, <b>target</b> <span style=\"color: maroon\">patient</span><span style=\"color: navy\"> : </span>Patient<span style=\"color: navy\">)</span><span style=\"color: navy\"> {#xD;\n</span>  item<b> as </b><span style=\"color: maroon\">item</span><span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">e</span><span style=\"color: navy\">, </span> e.resource = <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'ImagingStudy'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">imagingStudy</span><span style=\"color: navy\">, </span> imagingStudy.id = <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">, </span> imagingStudy.status = <span style=\"color: blue\">'available'</span><span style=\"color: navy\">, </span> imagingStudy.subject<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %patient.id<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> e.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">uuid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> serviceRequest.subject<b> as </b><span style=\"color: maroon\">subject</span><span style=\"color: navy\">, </span> subject.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %patient.id<span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> serviceRequest.supportingInfo<b> as </b><span style=\"color: maroon\">supportingInfo</span><span style=\"color: navy\">, </span> imagingStudy.series<b> as </b><span style=\"color: maroon\">series</span><span style=\"color: navy\">, </span> series.instance<b> as </b><span style=\"color: maroon\">instance</span><span style=\"color: navy\">, </span> supportingInfo.reference = <span style=\"color: navy\">(</span>'urn:uuid:' + %uuid<span style=\"color: navy\">)</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>    item.answer<b> as </b><span style=\"color: maroon\">answer</span><b> then</b><span style=\"color: navy\"> {#xD;\n</span>      answer.value<span style=\"color: navy\"> : </span>string<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span>imagingStudy.description = <span style=\"color: maroon\">value</span> <i>\"description\"</i><span style=\"color: navy\">;</span>#xD;\n    <span style=\"color: navy\">}</span> <i>\"answerValueString\"</i><span style=\"color: navy\">;</span>#xD;\n    item.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>(linkId.value = 'dicomObject.sopInstanceUid') and answer.exists()<span style=\"color: navy\"><b> -&gt; </b></span>instance.uid = <span style=\"color: navy\">(</span>%item.answer.value<span style=\"color: navy\">)</span> <i>\"uid\"</i><span style=\"color: navy\">;</span>#xD;\n    item.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>(linkId.value = 'dicomObject.modality') and answer.exists()<span style=\"color: navy\"><b> -&gt; </b></span> series.modality<b> as </b><span style=\"color: maroon\">modality</span><span style=\"color: navy\">, </span> modality.code = <span style=\"color: navy\">(</span>%item.answer.value.code<span style=\"color: navy\">)</span> <i>\"modality\"</i><span style=\"color: navy\">;</span>#xD;\n    item.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>(linkId.value = 'dicomObject.studyInstanceUid') and answer.exists()<span style=\"color: navy\"><b> -&gt; </b></span> imagingStudy.identifier<b> as </b><span style=\"color: maroon\">uid</span><span style=\"color: navy\">, </span> uid.type<b> as </b><span style=\"color: maroon\">type</span><span style=\"color: navy\">, </span> type.coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'urn:dicom:uid'</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'PLAC'</span><span style=\"color: navy\">, </span> uid.value = <span style=\"color: navy\">(</span>%item.answer.value<span style=\"color: navy\">)</span> <i>\"uid\"</i><span style=\"color: navy\">;</span>#xD;\n    item.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>(linkId.value = 'dicomObject.SeriesInstanceUid') and answer.exists()<span style=\"color: navy\"><b> -&gt; </b></span>series.uid = <span style=\"color: navy\">(</span>%item.answer.value<span style=\"color: navy\">)</span> <i>\"attachmentdicomSeriesInstanceUid\"</i><span style=\"color: navy\">;</span>#xD;\n    item.item<b> as </b><span style=\"color: maroon\">item</span><b> where </b>(linkId.value = 'dicomObject.acsn') and answer.exists()<span style=\"color: navy\"><b> -&gt; </b></span> imagingStudy.identifier<b> as </b><span style=\"color: maroon\">acsn</span><span style=\"color: navy\">, </span> acsn.type<b> as </b><span style=\"color: maroon\">type</span><span style=\"color: navy\">, </span> type.coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://terminology.hl7.org/CodeSystem/v2-0203'</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'ACSN'</span><span style=\"color: navy\">, </span> acsn.value = <span style=\"color: navy\">(</span>%item.answer.value<span style=\"color: navy\">)</span> <i>\"acsn\"</i><span style=\"color: navy\">;</span>#xD;\n  <span style=\"color: navy\">}</span> <i>\"supportingInfo\"</i><span style=\"color: navy\">;</span>#xD;\n<span style=\"color: navy\">}#xD;\n#xD;\n</span></pre></div>"^^rdf:XMLLiteral ]
  ] ; # 
  fhir:url [
     fhir:v "http://fhir.ch/ig/ch-rad-order/StructureMap/RadOrderQrToBundle"^^xsd:anyURI ;
     fhir:l <http://fhir.ch/ig/ch-rad-order/StructureMap/RadOrderQrToBundle>
  ] ; # 
  fhir:version [ fhir:v "2.0.1"] ; # 
  fhir:name [ fhir:v "RadOrderQrToBundle"] ; # 
  fhir:status [ fhir:v "draft"] ; # 
  fhir:date [ fhir:v "2025-12-17T07:17:47+00:00"^^xsd:dateTime] ; # 
  fhir:publisher [ fhir:v "HL7 Switzerland"] ; # 
  fhir:contact ( [
     fhir:name [ fhir:v "Juerg P. Bleuer" ] ;
     fhir:telecom ( [
       fhir:system [ fhir:v "url" ] ;
       fhir:value [ fhir:v "https://www.hl7.ch" ]
     ] )
  ] ) ; # 
  fhir:description [ fhir:v "Radiologoy QuestionnaireResponse to Bundle\r\nDerived from ORF QuestionnaireResponse to Bundle\r\n2021-01-11 Oliver Egger, copyright ahdis ag, Apache License\r\nQRF Questionnaire: http://fhir.ch/ig/ch-orf/Questionnaire-order-referral-form.html\r\nQRF QuestionnaireResponse: http://fhir.ch/ig/ch-orf/QuestionnaireResponse-order-referral-form.xml.html\r\nBundle: http://fhir.ch/ig/ch-orf/StructureDefinition-ch-orf-document.html"] ; # 
  fhir:jurisdiction ( [
     fhir:coding ( [
       fhir:system [
         fhir:v "urn:iso:std:iso:3166"^^xsd:anyURI ;
         fhir:l <urn:iso:std:iso:3166>
       ] ;
       fhir:code [ fhir:v "CH" ]
     ] )
  ] ) ; # 
  fhir:copyright [ fhir:v "CC0-1.0"] ; # 
  fhir:structure ( [
     fhir:url [
       fhir:v "http://hl7.org/fhir/StructureDefinition/QuestionnaireResponse"^^xsd:anyURI ;
       fhir:l <http://hl7.org/fhir/StructureDefinition/QuestionnaireResponse>
     ] ;
     fhir:mode [ fhir:v "source" ] ;
     fhir:alias [ fhir:v "QuestionnaireResponse" ]
  ] [
     fhir:url [
       fhir:v "http://hl7.org/fhir/StructureDefinition/Bundle"^^xsd:anyURI ;
       fhir:l <http://hl7.org/fhir/StructureDefinition/Bundle>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "Bundle" ]
  ] [
     fhir:url [
       fhir:v "http://hl7.org/fhir/StructureDefinition/Composition"^^xsd:anyURI ;
       fhir:l <http://hl7.org/fhir/StructureDefinition/Composition>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "Composition" ]
  ] [
     fhir:url [
       fhir:v "http://hl7.org/fhir/StructureDefinition/Patient"^^xsd:anyURI ;
       fhir:l <http://hl7.org/fhir/StructureDefinition/Patient>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "Patient" ]
  ] [
     fhir:url [
       fhir:v "http://hl7.org/fhir/StructureDefinition/RelatedPerson"^^xsd:anyURI ;
       fhir:l <http://hl7.org/fhir/StructureDefinition/RelatedPerson>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "RelatedPerson" ]
  ] [
     fhir:url [
       fhir:v "http://hl7.org/fhir/StructureDefinition/Organization"^^xsd:anyURI ;
       fhir:l <http://hl7.org/fhir/StructureDefinition/Organization>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "Organization" ]
  ] [
     fhir:url [
       fhir:v "http://hl7.org/fhir/StructureDefinition/Practitioner"^^xsd:anyURI ;
       fhir:l <http://hl7.org/fhir/StructureDefinition/Practitioner>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "Practitioner" ]
  ] [
     fhir:url [
       fhir:v "http://hl7.org/fhir/StructureDefinition/PractitionerRole"^^xsd:anyURI ;
       fhir:l <http://hl7.org/fhir/StructureDefinition/PractitionerRole>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "PractitionerRole" ]
  ] [
     fhir:url [
       fhir:v "http://hl7.org/fhir/StructureDefinition/ServiceRequest"^^xsd:anyURI ;
       fhir:l <http://hl7.org/fhir/StructureDefinition/ServiceRequest>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "ServiceRequest" ]
  ] [
     fhir:url [
       fhir:v "http://hl7.org/fhir/StructureDefinition/Extension"^^xsd:anyURI ;
       fhir:l <http://hl7.org/fhir/StructureDefinition/Extension>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "Extension" ]
  ] [
     fhir:url [
       fhir:v "http://hl7.org/fhir/StructureDefinition/EpisodeOfCare"^^xsd:anyURI ;
       fhir:l <http://hl7.org/fhir/StructureDefinition/EpisodeOfCare>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "EpisodeOfCare" ]
  ] [
     fhir:url [
       fhir:v "http://hl7.org/fhir/StructureDefinition/QuestionnaireResponse"^^xsd:anyURI ;
       fhir:l <http://hl7.org/fhir/StructureDefinition/QuestionnaireResponse>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "QuestionnaireResponseTarget" ]
  ] [
     fhir:url [
       fhir:v "http://hl7.org/fhir/StructureDefinition/QuestionnaireResponse"^^xsd:anyURI ;
       fhir:l <http://hl7.org/fhir/StructureDefinition/QuestionnaireResponse>
     ] ;
     fhir:mode [ fhir:v "source" ] ;
     fhir:alias [ fhir:v "QuestionnaireResponse" ]
  ] [
     fhir:url [
       fhir:v "http://hl7.org/fhir/StructureDefinition/Bundle"^^xsd:anyURI ;
       fhir:l <http://hl7.org/fhir/StructureDefinition/Bundle>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "Bundle" ]
  ] [
     fhir:url [
       fhir:v "http://hl7.org/fhir/StructureDefinition/Patient"^^xsd:anyURI ;
       fhir:l <http://hl7.org/fhir/StructureDefinition/Patient>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "Patient" ]
  ] [
     fhir:url [
       fhir:v "http://hl7.org/fhir/StructureDefinition/Organization"^^xsd:anyURI ;
       fhir:l <http://hl7.org/fhir/StructureDefinition/Organization>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "Organization" ]
  ] [
     fhir:url [
       fhir:v "http://hl7.org/fhir/StructureDefinition/Practitioner"^^xsd:anyURI ;
       fhir:l <http://hl7.org/fhir/StructureDefinition/Practitioner>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "Practitioner" ]
  ] [
     fhir:url [
       fhir:v "http://hl7.org/fhir/StructureDefinition/PractitionerRole"^^xsd:anyURI ;
       fhir:l <http://hl7.org/fhir/StructureDefinition/PractitionerRole>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "PractitionerRole" ]
  ] [
     fhir:url [
       fhir:v "http://hl7.org/fhir/StructureDefinition/ServiceRequest"^^xsd:anyURI ;
       fhir:l <http://hl7.org/fhir/StructureDefinition/ServiceRequest>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "ServiceRequest" ]
  ] ) ; # 
  fhir:import ( [
     fhir:v "http://fhir.ch/ig/ch-orf/StructureMap/OrfQrToBundle"^^xsd:anyURI ;
     fhir:l <http://fhir.ch/ig/ch-orf/StructureMap/OrfQrToBundle>
  ] ) ; # 
  fhir:group ( [
     fhir:name [ fhir:v "RadOrderQrToBundle" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "qr" ] ;
       fhir:type [ fhir:v "QuestionnaireResponse" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "bundle" ] ;
       fhir:type [ fhir:v "Bundle" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "documentIdentifier" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "bundle" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "identifier" ] ;
         fhir:variable [ fhir:v "documentIdentifier" ]
       ] [
         fhir:context [ fhir:v "documentIdentifier" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "system" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "urn:ietf:rfc:3986"
           ]
         ] )
       ] [
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:variable [ fhir:v "uuidDoc" ] ;
         fhir:transform [ fhir:v "uuid" ]
       ] [
         fhir:context [ fhir:v "documentIdentifier" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "value" ] ;
         fhir:transform [ fhir:v "append" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "urn:uuid:"
           ]
         ] [
           fhir:value [
             a fhir:Id ;
             fhir:v "uuidDoc"
           ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "orfbundle" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:variable [ fhir:v "qrcp" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "bundle" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "entry" ] ;
         fhir:variable [ fhir:v "e" ]
       ] [
         fhir:context [ fhir:v "e" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "resource" ] ;
         fhir:variable [ fhir:v "composition" ] ;
         fhir:transform [ fhir:v "create" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "Composition"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "composition" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "id" ] ;
         fhir:variable [ fhir:v "uuid" ] ;
         fhir:transform [ fhir:v "uuid" ]
       ] [
         fhir:context [ fhir:v "e" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "fullUrl" ] ;
         fhir:transform [ fhir:v "evaluate" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "'urn:uuid:' + %uuid"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "composition" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "title" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "Radiologieauftrag"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "composition" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "type" ] ;
         fhir:variable [ fhir:v "type" ]
       ] [
         fhir:context [ fhir:v "type" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "coding" ] ;
         fhir:variable [ fhir:v "coding" ]
       ] [
         fhir:context [ fhir:v "coding" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "code" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "2161000195103"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "coding" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "system" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "urn:oid:2.16.756.5.30.1.127.3.4"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "coding" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "display" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "Imaging order (record artifact)"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "composition" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "category" ] ;
         fhir:variable [ fhir:v "category" ]
       ] [
         fhir:context [ fhir:v "category" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "coding" ] ;
         fhir:variable [ fhir:v "coding" ]
       ] [
         fhir:context [ fhir:v "coding" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "code" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "721963009"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "coding" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "system" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "http://snomed.info/sct"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "coding" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "display" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "Order (record artifact)"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "bundle" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "entry" ] ;
         fhir:variable [ fhir:v "e2" ]
       ] [
         fhir:context [ fhir:v "bundle" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "timestamp" ] ;
         fhir:variable [ fhir:v "timestamp" ] ;
         fhir:transform [ fhir:v "evaluate" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "now()"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "bundle" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "type" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "document"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "composition" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "date" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:Id ;
             fhir:v "timestamp"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "e2" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "resource" ] ;
         fhir:variable [ fhir:v "patient" ] ;
         fhir:transform [ fhir:v "create" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "Patient"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "patient" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "id" ] ;
         fhir:variable [ fhir:v "uuid2" ] ;
         fhir:transform [ fhir:v "uuid" ]
       ] [
         fhir:context [ fhir:v "e2" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "fullUrl" ] ;
         fhir:transform [ fhir:v "evaluate" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "'urn:uuid:' + %uuid2"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "bundle" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "entry" ] ;
         fhir:variable [ fhir:v "e4" ]
       ] [
         fhir:context [ fhir:v "e4" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "resource" ] ;
         fhir:variable [ fhir:v "questionnaireresp" ] ;
         fhir:transform [ fhir:v "create" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "QuestionnaireResponse"
           ]
         ] )
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "questionnaireresp" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "qr" ]
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "QuestionnaireResponseMap" ] ;
           fhir:variable ( [ fhir:v "qr" ] [ fhir:v "questionnaireresp" ] )
         ] )
       ] [
         fhir:name [ fhir:v "servicerequest" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "qr" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "questionnaireresp" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "id" ] ;
           fhir:variable [ fhir:v "uuid4" ] ;
           fhir:transform [ fhir:v "uuid" ]
         ] [
           fhir:context [ fhir:v "e4" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "fullUrl" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:String ;
               fhir:v "urn:uuid:"
             ]
           ] [
             fhir:value [
               a fhir:Id ;
               fhir:v "uuid4"
             ]
           ] )
         ] [
           fhir:context [ fhir:v "bundle" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "entry" ] ;
           fhir:variable [ fhir:v "e5" ]
         ] [
           fhir:context [ fhir:v "e5" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "resource" ] ;
           fhir:variable [ fhir:v "servicerequest" ] ;
           fhir:transform [ fhir:v "create" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:String ;
               fhir:v "ServiceRequest"
             ]
           ] )
         ] [
           fhir:context [ fhir:v "servicerequest" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "id" ] ;
           fhir:variable [ fhir:v "uuid5" ] ;
           fhir:transform [ fhir:v "uuid" ]
         ] [
           fhir:context [ fhir:v "e5" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "fullUrl" ] ;
           fhir:transform [ fhir:v "evaluate" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:String ;
               fhir:v "'urn:uuid:' + %uuid5"
             ]
           ] )
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "composition" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "qr" ]
           ] ) ;
           fhir:dependent ( [
             fhir:name [ fhir:v "OrfComposition" ] ;
             fhir:variable ( [ fhir:v "qr" ] [ fhir:v "composition" ] [ fhir:v "patient" ] [ fhir:v "questionnaireresp" ] [ fhir:v "servicerequest" ] [ fhir:v "bundle" ] )
           ] )
         ] [
           fhir:name [ fhir:v "orf" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "qr" ]
           ] ) ;
           fhir:dependent ( [
             fhir:name [ fhir:v "QrToGroups" ] ;
             fhir:variable ( [ fhir:v "questionnaireresp" ] [ fhir:v "patient" ] [ fhir:v "bundle" ] [ fhir:v "composition" ] [ fhir:v "servicerequest" ] )
           ] )
         ] [
           fhir:name [ fhir:v "servicerequest" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "qr" ]
           ] ) ;
           fhir:dependent ( [
             fhir:name [ fhir:v "RadOrderQrToServiceRequest" ] ;
             fhir:variable ( [ fhir:v "questionnaireresp" ] [ fhir:v "patient" ] [ fhir:v "bundle" ] [ fhir:v "composition" ] [ fhir:v "servicerequest" ] )
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "RadOrderQrToServiceRequest" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "qr" ] ;
       fhir:type [ fhir:v "QuestionnaireResponse" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "patient" ] ;
       fhir:type [ fhir:v "Patient" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "bundle" ] ;
       fhir:type [ fhir:v "Bundle" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "composition" ] ;
       fhir:type [ fhir:v "Composition" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "serviceRequest" ] ;
       fhir:type [ fhir:v "ServiceRequest" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "requestedService" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "grp" ] ;
         fhir:condition [ fhir:v "linkId = 'requestedService'" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "RequestedServiceItems" ] ;
         fhir:variable ( [ fhir:v "grp" ] [ fhir:v "serviceRequest" ] )
       ] )
     ] [
       fhir:name [ fhir:v "reason" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "grp" ] ;
         fhir:condition [ fhir:v "linkId = 'reason'" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ReasonServiceItems" ] ;
         fhir:variable ( [ fhir:v "grp" ] [ fhir:v "serviceRequest" ] )
       ] )
     ] [
       fhir:name [ fhir:v "imagingService" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "grp" ] ;
         fhir:condition [ fhir:v "linkId = 'imagingService'" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "ImagingServiceItems" ] ;
         fhir:variable ( [ fhir:v "grp" ] [ fhir:v "serviceRequest" ] )
       ] )
     ] [
       fhir:name [ fhir:v "orderDetail" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "grp" ] ;
         fhir:condition [ fhir:v "linkId = 'orderDetail'" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "OrderDetailServiceItems" ] ;
         fhir:variable ( [ fhir:v "grp" ] [ fhir:v "serviceRequest" ] )
       ] )
     ] [
       fhir:name [ fhir:v "desiredRadiologist" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "grp" ] ;
         fhir:condition [ fhir:v "linkId = 'desiredRadiologist'" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "DesiredRadiologistServiceItems" ] ;
         fhir:variable ( [ fhir:v "grp" ] [ fhir:v "bundle" ] [ fhir:v "serviceRequest" ] )
       ] )
     ] [
       fhir:name [ fhir:v "diagnosisList" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "grp" ] ;
         fhir:condition [ fhir:v "linkId = 'diagnosisList'" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "DiagnosisListServiceItems" ] ;
         fhir:variable ( [ fhir:v "grp" ] [ fhir:v "patient" ] [ fhir:v "bundle" ] [ fhir:v "serviceRequest" ] )
       ] )
     ] [
       fhir:name [ fhir:v "Caveat" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "grp" ] ;
         fhir:condition [ fhir:v "linkId = 'caveat'" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "CaveatServiceItems" ] ;
         fhir:variable ( [ fhir:v "grp" ] [ fhir:v "patient" ] [ fhir:v "bundle" ] [ fhir:v "serviceRequest" ] )
       ] )
     ] [
       fhir:name [ fhir:v "previousResults" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "qr" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "grp" ] ;
         fhir:condition [ fhir:v "linkId = 'previousResults'" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "attachment" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "grp" ] ;
           fhir:element [ fhir:v "item" ] ;
           fhir:variable [ fhir:v "grp" ] ;
           fhir:condition [ fhir:v "linkId = 'attachedFile'" ]
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "PreviousImagingStudyResultsNonDicom" ] ;
           fhir:variable ( [ fhir:v "grp" ] [ fhir:v "bundle" ] [ fhir:v "serviceRequest" ] [ fhir:v "patient" ] )
         ] )
       ] [
         fhir:name [ fhir:v "attachment" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "grp" ] ;
           fhir:element [ fhir:v "item" ] ;
           fhir:variable [ fhir:v "grp" ] ;
           fhir:condition [ fhir:v "linkId = 'dicomObject'" ]
         ] ) ;
         fhir:dependent ( [
           fhir:name [ fhir:v "PreviousImagingStudyResults" ] ;
           fhir:variable ( [ fhir:v "grp" ] [ fhir:v "bundle" ] [ fhir:v "serviceRequest" ] [ fhir:v "patient" ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "RequestedServiceItems" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "src" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "serviceRequest" ] ;
       fhir:type [ fhir:v "ServiceRequest" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "itemAnswer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "((linkId.value = 'requestedService.service') and answer.exists())" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "answerCalueCoding" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "answer" ] ;
           fhir:variable [ fhir:v "answer" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "requestedServiceService" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "answer" ] ;
             fhir:type [ fhir:v "Coding" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "serviceRequest" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "category" ] ;
             fhir:variable [ fhir:v "cc" ]
           ] [
             fhir:context [ fhir:v "cc" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:Id ;
                 fhir:v "coding"
               ]
             ] )
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "ReasonServiceItems" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "src" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "serviceRequest" ] ;
       fhir:type [ fhir:v "ServiceRequest" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "itemAnswer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "((linkId.value = 'reason.question') and answer.exists())" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "answerValueString" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "answer" ] ;
           fhir:variable [ fhir:v "answer" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "reasonQuestion" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "answer" ] ;
             fhir:type [ fhir:v "string" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "value" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "serviceRequest" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reasonCode" ] ;
             fhir:variable [ fhir:v "reasonCode" ]
           ] [
             fhir:context [ fhir:v "reasonCode" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "text" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:Id ;
                 fhir:v "value"
               ]
             ] )
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "ImagingServiceItems" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "src" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "serviceRequest" ] ;
       fhir:type [ fhir:v "ServiceRequest" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "itemAnswer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "((linkId.value = 'imagingService.type') and answer.exists())" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "answerValueCoding" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "answer" ] ;
           fhir:variable [ fhir:v "answer" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "requestedServiceService" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "answer" ] ;
             fhir:type [ fhir:v "Coding" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "serviceRequest" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:variable [ fhir:v "code" ]
           ] [
             fhir:context [ fhir:v "code" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:Id ;
                 fhir:v "coding"
               ]
             ] )
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "OrderDetailServiceItems" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "src" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "serviceRequest" ] ;
       fhir:type [ fhir:v "ServiceRequest" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "itemAnswer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "((linkId.value = 'orderDetail.imagingRegion') and answer.exists())" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "answerValueCoding" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "answer" ] ;
           fhir:variable [ fhir:v "answer" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "orderDetailImagingRegion" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "answer" ] ;
             fhir:type [ fhir:v "Coding" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "serviceRequest" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "orderDetail" ] ;
             fhir:variable [ fhir:v "cc" ]
           ] [
             fhir:context [ fhir:v "cc" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext" ]
           ] [
             fhir:context [ fhir:v "ext" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-order-detail-type"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Coding"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/CodeSystem/ch-rad-order-order-detail-type"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "imagingRegion"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "cc" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:Id ;
                 fhir:v "coding"
               ]
             ] )
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "itemAnswer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "((linkId.value = 'orderDetail.imagingFocus') and answer.exists())" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "answerValueCoding" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "answer" ] ;
           fhir:variable [ fhir:v "answer" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "orderDetailImagingFocus" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "answer" ] ;
             fhir:type [ fhir:v "Coding" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "serviceRequest" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "bodySite" ] ;
             fhir:variable [ fhir:v "cc" ]
           ] [
             fhir:context [ fhir:v "cc" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:Id ;
                 fhir:v "coding"
               ]
             ] )
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "itemAnswer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "((linkId.value = 'orderDetail.laterality') and answer.exists())" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "answerValueCoding" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "answer" ] ;
           fhir:variable [ fhir:v "answer" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "orderDetailLaterality" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "answer" ] ;
             fhir:type [ fhir:v "Coding" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "serviceRequest" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "orderDetail" ] ;
             fhir:variable [ fhir:v "cc" ]
           ] [
             fhir:context [ fhir:v "cc" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext" ]
           ] [
             fhir:context [ fhir:v "ext" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-order-detail-type"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Coding"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/CodeSystem/ch-rad-order-order-detail-type"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "laterality"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "cc" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:Id ;
                 fhir:v "coding"
               ]
             ] )
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "itemAnswer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "((linkId.value = 'orderDetail.viewType') and answer.exists())" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "answerValueCoding" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "answer" ] ;
           fhir:variable [ fhir:v "answer" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "orderDetailViewType" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "answer" ] ;
             fhir:type [ fhir:v "Coding" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "serviceRequest" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "orderDetail" ] ;
             fhir:variable [ fhir:v "cc" ]
           ] [
             fhir:context [ fhir:v "cc" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext" ]
           ] [
             fhir:context [ fhir:v "ext" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-order-detail-type"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Coding"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/CodeSystem/ch-rad-order-order-detail-type"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "viewType"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "cc" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:Id ;
                 fhir:v "coding"
               ]
             ] )
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "itemAnswer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "((linkId.value = 'orderDetail.maneuverType') and answer.exists())" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "answerValueCoding" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "answer" ] ;
           fhir:variable [ fhir:v "answer" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "orderDetailManeuverType" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "answer" ] ;
             fhir:type [ fhir:v "Coding" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "serviceRequest" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "orderDetail" ] ;
             fhir:variable [ fhir:v "cc" ]
           ] [
             fhir:context [ fhir:v "cc" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext" ]
           ] [
             fhir:context [ fhir:v "ext" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-order-detail-type"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Coding"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/CodeSystem/ch-rad-order-order-detail-type"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "maneuverType"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "cc" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:Id ;
                 fhir:v "coding"
               ]
             ] )
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "itemAnswer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "((linkId.value = 'orderDetail.guidanceForAction') and answer.exists())" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "answerValueCoding" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "answer" ] ;
           fhir:variable [ fhir:v "answer" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "orderDetailGuidanceForAction" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "answer" ] ;
             fhir:type [ fhir:v "Coding" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "serviceRequest" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "orderDetail" ] ;
             fhir:variable [ fhir:v "cc" ]
           ] [
             fhir:context [ fhir:v "cc" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext" ]
           ] [
             fhir:context [ fhir:v "ext" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-order-detail-type"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Coding"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/CodeSystem/ch-rad-order-order-detail-type"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "guidanceForAction"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "cc" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:Id ;
                 fhir:v "coding"
               ]
             ] )
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "DesiredRadiologistServiceItems" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "src" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "bundle" ] ;
       fhir:type [ fhir:v "Bundle" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "serviceRequest" ] ;
       fhir:type [ fhir:v "ServiceRequest" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "serviceRequestPerformer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "bundle" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "entry" ] ;
         fhir:variable [ fhir:v "e" ]
       ] [
         fhir:context [ fhir:v "e" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "resource" ] ;
         fhir:variable [ fhir:v "practitioner" ] ;
         fhir:transform [ fhir:v "create" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "Practitioner"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "practitioner" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "id" ] ;
         fhir:variable [ fhir:v "uuid" ] ;
         fhir:transform [ fhir:v "uuid" ]
       ] [
         fhir:context [ fhir:v "serviceRequest" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "performer" ] ;
         fhir:variable [ fhir:v "performer" ]
       ] [
         fhir:context [ fhir:v "performer" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "reference" ] ;
         fhir:transform [ fhir:v "evaluate" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "'urn:uuid:' + %uuid"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "e" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "fullUrl" ] ;
         fhir:transform [ fhir:v "evaluate" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "'urn:uuid:' + %uuid"
           ]
         ] )
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "item" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "src" ] ;
           fhir:element [ fhir:v "item" ] ;
           fhir:variable [ fhir:v "item" ] ;
           fhir:condition [ fhir:v "((linkId.value = 'desiredRadiologist.familyName') and answer.exists())" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "practitioner" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "name" ] ;
           fhir:variable [ fhir:v "name" ] ;
           fhir:listMode ( [ fhir:v "share" ] ) ;
           fhir:listRuleId [ fhir:v "name" ]
         ] [
           fhir:context [ fhir:v "name" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "family" ] ;
           fhir:transform [ fhir:v "evaluate" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:String ;
               fhir:v "%item.answer.value"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "item" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "src" ] ;
           fhir:element [ fhir:v "item" ] ;
           fhir:variable [ fhir:v "item" ] ;
           fhir:condition [ fhir:v "((linkId.value = 'desiredRadiologist.givenName') and answer.exists())" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "practitioner" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "name" ] ;
           fhir:variable [ fhir:v "name" ] ;
           fhir:listMode ( [ fhir:v "share" ] ) ;
           fhir:listRuleId [ fhir:v "name" ]
         ] [
           fhir:context [ fhir:v "name" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "given" ] ;
           fhir:transform [ fhir:v "evaluate" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:String ;
               fhir:v "%item.answer.value"
             ]
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "DiagnosisListServiceItems" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "src" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "patient" ] ;
       fhir:type [ fhir:v "Patient" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "bundle" ] ;
       fhir:type [ fhir:v "Bundle" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "serviceRequest" ] ;
       fhir:type [ fhir:v "ServiceRequest" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "itemAnswer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "((linkId.value = 'diagnosisList.primaryDiagnosis') and answer.exists())" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "answerValueString" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "answer" ] ;
           fhir:variable [ fhir:v "answer" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "diagnosisListPrimaryDiagnosis" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "answer" ] ;
             fhir:type [ fhir:v "string" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "value" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "e" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "condition" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Condition"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "id" ] ;
             fhir:variable [ fhir:v "uuid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "serviceRequest" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reasonReference" ] ;
             fhir:variable [ fhir:v "reasonReference" ]
           ] [
             fhir:context [ fhir:v "reasonReference" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "category" ] ;
             fhir:variable [ fhir:v "category" ]
           ] [
             fhir:context [ fhir:v "category" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "problem-list-item"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://terminology.hl7.org/CodeSystem/condition-category"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Problem List Item"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:variable [ fhir:v "code" ]
           ] [
             fhir:context [ fhir:v "code" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "text" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:Id ;
                 fhir:v "value"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "subject" ] ;
             fhir:variable [ fhir:v "subject" ]
           ] [
             fhir:context [ fhir:v "subject" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %patient.id"
               ]
             ] )
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "itemAnswer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "((linkId.value = 'diagnosisList.secondaryDiagnosis') and answer.exists())" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "answerValueString" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "answer" ] ;
           fhir:variable [ fhir:v "answer" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "diagnosisListSecondaryDiagnosis" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "answer" ] ;
             fhir:type [ fhir:v "string" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "value" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "e" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "condition" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Condition"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "id" ] ;
             fhir:variable [ fhir:v "uuid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "serviceRequest" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "supportingInfo" ] ;
             fhir:variable [ fhir:v "supportingInfo" ]
           ] [
             fhir:context [ fhir:v "supportingInfo" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "category" ] ;
             fhir:variable [ fhir:v "category" ]
           ] [
             fhir:context [ fhir:v "category" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "problem-list-item"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://terminology.hl7.org/CodeSystem/condition-category"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Problem List Item"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:variable [ fhir:v "code" ]
           ] [
             fhir:context [ fhir:v "code" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "text" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:Id ;
                 fhir:v "value"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "subject" ] ;
             fhir:variable [ fhir:v "subject" ]
           ] [
             fhir:context [ fhir:v "subject" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %patient.id"
               ]
             ] )
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "itemAnswer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "((linkId.value = 'diagnosisList.bodyHeight') and answer.exists())" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "answerValueString" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "answer" ] ;
           fhir:variable [ fhir:v "answer" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "observationBodyHeight" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "answer" ] ;
             fhir:type [ fhir:v "Quantity" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "value" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "e" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "observation" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Observation"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "observation" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "status" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "final"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "observation" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "id" ] ;
             fhir:variable [ fhir:v "uuid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "observation" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "status" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "final"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "serviceRequest" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "supportingInfo" ] ;
             fhir:variable [ fhir:v "supportingInfo" ]
           ] [
             fhir:context [ fhir:v "supportingInfo" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "observation" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "category" ] ;
             fhir:variable [ fhir:v "category" ]
           ] [
             fhir:context [ fhir:v "category" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "vital-signs"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://terminology.hl7.org/CodeSystem/observation-category"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "observation" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:Id ;
                 fhir:v "value"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "observation" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:variable [ fhir:v "cc" ]
           ] [
             fhir:context [ fhir:v "cc" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "c" ]
           ] [
             fhir:context [ fhir:v "c" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://loinc.org"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "c" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "8302-2"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "observation" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "subject" ] ;
             fhir:variable [ fhir:v "subject" ]
           ] [
             fhir:context [ fhir:v "subject" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %patient.id"
               ]
             ] )
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "itemAnswer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "((linkId.value = 'diagnosisList.bodyWeight') and answer.exists())" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "answerValueString" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "answer" ] ;
           fhir:variable [ fhir:v "answer" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "observationBbodyWeight" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "answer" ] ;
             fhir:type [ fhir:v "Quantity" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "value" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "e" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "observation" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Observation"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "observation" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "status" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "final"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "observation" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "id" ] ;
             fhir:variable [ fhir:v "uuid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "observation" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "status" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "final"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "serviceRequest" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "supportingInfo" ] ;
             fhir:variable [ fhir:v "supportingInfo" ]
           ] [
             fhir:context [ fhir:v "supportingInfo" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "observation" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "category" ] ;
             fhir:variable [ fhir:v "category" ]
           ] [
             fhir:context [ fhir:v "category" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "vital-signs"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://terminology.hl7.org/CodeSystem/observation-category"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "observation" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:Id ;
                 fhir:v "value"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "observation" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:variable [ fhir:v "cc" ]
           ] [
             fhir:context [ fhir:v "cc" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "c" ]
           ] [
             fhir:context [ fhir:v "c" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://loinc.org"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "c" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "29463-7"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "observation" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "subject" ] ;
             fhir:variable [ fhir:v "subject" ]
           ] [
             fhir:context [ fhir:v "subject" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %patient.id"
               ]
             ] )
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "CaveatServiceItems" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "src" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "patient" ] ;
       fhir:type [ fhir:v "Patient" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "bundle" ] ;
       fhir:type [ fhir:v "Bundle" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "serviceRequest" ] ;
       fhir:type [ fhir:v "ServiceRequest" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "itemAnswer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "((linkId.value = 'caveatList.bloodCoagulation') and answer.exists())" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "answerValueString" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "answer" ] ;
           fhir:variable [ fhir:v "answer" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "bloodCoagulation" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "answer" ] ;
             fhir:type [ fhir:v "Coding" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "value" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "e" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "condition" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Condition"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "id" ] ;
             fhir:variable [ fhir:v "uuid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "serviceRequest" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "supportingInfo" ] ;
             fhir:variable [ fhir:v "supportingInfo" ]
           ] [
             fhir:context [ fhir:v "supportingInfo" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext1" ]
           ] [
             fhir:context [ fhir:v "ext1" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-caveat-type"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext1" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Coding"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "64779008"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://snomed.info/sct"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Blood coagulation disorder (disorder)"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext2" ]
           ] [
             fhir:context [ fhir:v "ext2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-qualifier-value"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:Id ;
                 fhir:v "value"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "category" ] ;
             fhir:variable [ fhir:v "category" ]
           ] [
             fhir:context [ fhir:v "category" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "problem-list-item"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://terminology.hl7.org/CodeSystem/condition-category"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Problem List Item"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:variable [ fhir:v "code" ]
           ] [
             fhir:context [ fhir:v "code" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding2" ]
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "64779008"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://snomed.info/sct"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Blood coagulation disorder (disorder)"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "subject" ] ;
             fhir:variable [ fhir:v "subject" ]
           ] [
             fhir:context [ fhir:v "subject" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %patient.id"
               ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "caveatBloodCoagulationINR" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "answer" ] ;
               fhir:element [ fhir:v "item" ] ;
               fhir:variable [ fhir:v "subitem" ] ;
               fhir:condition [ fhir:v "(linkId.value = 'caveatList.bloodCoagulation.INR')" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "bundle" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "entry" ] ;
               fhir:variable [ fhir:v "e" ]
             ] [
               fhir:context [ fhir:v "e" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "resource" ] ;
               fhir:variable [ fhir:v "observation" ] ;
               fhir:transform [ fhir:v "create" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "Observation"
                 ]
               ] )
             ] [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "id" ] ;
               fhir:variable [ fhir:v "uuid" ] ;
               fhir:transform [ fhir:v "uuid" ]
             ] [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "status" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "final"
                 ]
               ] )
             ] [
               fhir:context [ fhir:v "e" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "fullUrl" ] ;
               fhir:transform [ fhir:v "evaluate" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "'urn:uuid:' + %uuid"
                 ]
               ] )
             ] [
               fhir:context [ fhir:v "condition" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "evidence" ] ;
               fhir:variable [ fhir:v "evidence" ]
             ] [
               fhir:context [ fhir:v "evidence" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "detail" ] ;
               fhir:variable [ fhir:v "detail" ]
             ] [
               fhir:context [ fhir:v "detail" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "reference" ] ;
               fhir:transform [ fhir:v "evaluate" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "'urn:uuid:' + %uuid"
                 ]
               ] )
             ] [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:variable [ fhir:v "cc" ]
             ] [
               fhir:context [ fhir:v "cc" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "coding" ] ;
               fhir:variable [ fhir:v "c" ]
             ] [
               fhir:context [ fhir:v "c" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "system" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "http://loinc.org"
                 ]
               ] )
             ] [
               fhir:context [ fhir:v "c" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "34714-6"
                 ]
               ] )
             ] [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "subject" ] ;
               fhir:variable [ fhir:v "subject" ]
             ] [
               fhir:context [ fhir:v "subject" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "reference" ] ;
               fhir:transform [ fhir:v "evaluate" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "'urn:uuid:' + %patient.id"
                 ]
               ] )
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "caveatBloodCoagulationINRQuantity" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "subitem" ] ;
                 fhir:element [ fhir:v "item" ] ;
                 fhir:variable [ fhir:v "quantityitem" ] ;
                 fhir:condition [ fhir:v "((linkId.value = 'caveatList.bloodCoagulation.INR.quantity') and answer.exists())" ]
               ] ) ;
               fhir:rule ( [
                 fhir:name [ fhir:v "caveatBloodCoagulationINRQuantityValue" ] ;
                 fhir:source ( [
                   fhir:context [ fhir:v "quantityitem" ] ;
                   fhir:element [ fhir:v "answer" ] ;
                   fhir:variable [ fhir:v "answer" ]
                 ] ) ;
                 fhir:rule ( [
                   fhir:name [ fhir:v "value" ] ;
                   fhir:source ( [
                     fhir:context [ fhir:v "answer" ] ;
                     fhir:type [ fhir:v "Quantity" ] ;
                     fhir:element [ fhir:v "value" ] ;
                     fhir:variable [ fhir:v "value" ]
                   ] ) ;
                   fhir:target ( [
                     fhir:context [ fhir:v "observation" ] ;
                     fhir:contextType [ fhir:v "variable" ] ;
                     fhir:element [ fhir:v "value" ] ;
                     fhir:transform [ fhir:v "copy" ] ;
                     fhir:parameter ( [
                       fhir:value [
                         a fhir:Id ;
                         fhir:v "value"
                       ]
                     ] )
                   ] )
                 ] )
               ] )
             ] [
               fhir:name [ fhir:v "caveatBloodCoagulationINRDateTime" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "subitem" ] ;
                 fhir:element [ fhir:v "item" ] ;
                 fhir:variable [ fhir:v "datetimeitem" ] ;
                 fhir:condition [ fhir:v "((linkId.value = 'caveatList.bloodCoagulation.INR.dateTime') and answer.exists())" ]
               ] ) ;
               fhir:rule ( [
                 fhir:name [ fhir:v "caveatBloodCoagulationINRDateTimeValue" ] ;
                 fhir:source ( [
                   fhir:context [ fhir:v "datetimeitem" ] ;
                   fhir:element [ fhir:v "answer" ] ;
                   fhir:variable [ fhir:v "answer" ]
                 ] ) ;
                 fhir:rule ( [
                   fhir:name [ fhir:v "value" ] ;
                   fhir:source ( [
                     fhir:context [ fhir:v "answer" ] ;
                     fhir:type [ fhir:v "dateTime" ] ;
                     fhir:element [ fhir:v "value" ] ;
                     fhir:variable [ fhir:v "value" ]
                   ] ) ;
                   fhir:target ( [
                     fhir:context [ fhir:v "observation" ] ;
                     fhir:contextType [ fhir:v "variable" ] ;
                     fhir:element [ fhir:v "effective" ] ;
                     fhir:transform [ fhir:v "copy" ] ;
                     fhir:parameter ( [
                       fhir:value [
                         a fhir:Id ;
                         fhir:v "value"
                       ]
                     ] )
                   ] )
                 ] )
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "caveatBloodCoagulationINR" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "answer" ] ;
               fhir:element [ fhir:v "item" ] ;
               fhir:variable [ fhir:v "subitem" ] ;
               fhir:condition [ fhir:v "(linkId.value = 'caveatList.bloodCoagulation.platelets')" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "bundle" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "entry" ] ;
               fhir:variable [ fhir:v "e" ]
             ] [
               fhir:context [ fhir:v "e" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "resource" ] ;
               fhir:variable [ fhir:v "observation" ] ;
               fhir:transform [ fhir:v "create" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "Observation"
                 ]
               ] )
             ] [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "id" ] ;
               fhir:variable [ fhir:v "uuid" ] ;
               fhir:transform [ fhir:v "uuid" ]
             ] [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "status" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "final"
                 ]
               ] )
             ] [
               fhir:context [ fhir:v "e" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "fullUrl" ] ;
               fhir:transform [ fhir:v "evaluate" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "'urn:uuid:' + %uuid"
                 ]
               ] )
             ] [
               fhir:context [ fhir:v "condition" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "evidence" ] ;
               fhir:variable [ fhir:v "evidence" ]
             ] [
               fhir:context [ fhir:v "evidence" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "detail" ] ;
               fhir:variable [ fhir:v "detail" ]
             ] [
               fhir:context [ fhir:v "detail" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "reference" ] ;
               fhir:transform [ fhir:v "evaluate" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "'urn:uuid:' + %uuid"
                 ]
               ] )
             ] [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:variable [ fhir:v "cc" ]
             ] [
               fhir:context [ fhir:v "cc" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "coding" ] ;
               fhir:variable [ fhir:v "c" ]
             ] [
               fhir:context [ fhir:v "c" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "system" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "http://loinc.org"
                 ]
               ] )
             ] [
               fhir:context [ fhir:v "c" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "26515-7"
                 ]
               ] )
             ] [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "subject" ] ;
               fhir:variable [ fhir:v "subject" ]
             ] [
               fhir:context [ fhir:v "subject" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "reference" ] ;
               fhir:transform [ fhir:v "evaluate" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "'urn:uuid:' + %patient.id"
                 ]
               ] )
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "caveatBloodCoagulationINRPlatelets" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "subitem" ] ;
                 fhir:element [ fhir:v "item" ] ;
                 fhir:variable [ fhir:v "quantityitem" ] ;
                 fhir:condition [ fhir:v "((linkId.value = 'caveatList.bloodCoagulation.platelets.quantity') and answer.exists())" ]
               ] ) ;
               fhir:rule ( [
                 fhir:name [ fhir:v "caveatBloodCoagulationINRPlateletsValue" ] ;
                 fhir:source ( [
                   fhir:context [ fhir:v "quantityitem" ] ;
                   fhir:element [ fhir:v "answer" ] ;
                   fhir:variable [ fhir:v "answer" ]
                 ] ) ;
                 fhir:rule ( [
                   fhir:name [ fhir:v "value" ] ;
                   fhir:source ( [
                     fhir:context [ fhir:v "answer" ] ;
                     fhir:type [ fhir:v "Quantity" ] ;
                     fhir:element [ fhir:v "value" ] ;
                     fhir:variable [ fhir:v "value" ]
                   ] ) ;
                   fhir:target ( [
                     fhir:context [ fhir:v "observation" ] ;
                     fhir:contextType [ fhir:v "variable" ] ;
                     fhir:element [ fhir:v "value" ] ;
                     fhir:transform [ fhir:v "copy" ] ;
                     fhir:parameter ( [
                       fhir:value [
                         a fhir:Id ;
                         fhir:v "value"
                       ]
                     ] )
                   ] )
                 ] )
               ] )
             ] [
               fhir:name [ fhir:v "caveatBloodCoagulationINRPlatelets" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "subitem" ] ;
                 fhir:element [ fhir:v "item" ] ;
                 fhir:variable [ fhir:v "datetimeitem" ] ;
                 fhir:condition [ fhir:v "((linkId.value = 'caveatList.bloodCoagulation.platelets.dateTime') and answer.exists())" ]
               ] ) ;
               fhir:rule ( [
                 fhir:name [ fhir:v "caveatBloodCoagulationINRPlateletsValue" ] ;
                 fhir:source ( [
                   fhir:context [ fhir:v "datetimeitem" ] ;
                   fhir:element [ fhir:v "answer" ] ;
                   fhir:variable [ fhir:v "answer" ]
                 ] ) ;
                 fhir:rule ( [
                   fhir:name [ fhir:v "value" ] ;
                   fhir:source ( [
                     fhir:context [ fhir:v "answer" ] ;
                     fhir:type [ fhir:v "dateTime" ] ;
                     fhir:element [ fhir:v "value" ] ;
                     fhir:variable [ fhir:v "value" ]
                   ] ) ;
                   fhir:target ( [
                     fhir:context [ fhir:v "observation" ] ;
                     fhir:contextType [ fhir:v "variable" ] ;
                     fhir:element [ fhir:v "effective" ] ;
                     fhir:transform [ fhir:v "copy" ] ;
                     fhir:parameter ( [
                       fhir:value [
                         a fhir:Id ;
                         fhir:v "value"
                       ]
                     ] )
                   ] )
                 ] )
               ] )
             ] )
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "itemAnswer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "((linkId.value = 'caveatList.renalInsufficiency') and answer.exists())" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "answerValueString" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "answer" ] ;
           fhir:variable [ fhir:v "answer" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "bloodCoagulation" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "answer" ] ;
             fhir:type [ fhir:v "Coding" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "value" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "e" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "condition" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Condition"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "id" ] ;
             fhir:variable [ fhir:v "uuid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "serviceRequest" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "supportingInfo" ] ;
             fhir:variable [ fhir:v "supportingInfo" ]
           ] [
             fhir:context [ fhir:v "supportingInfo" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext1" ]
           ] [
             fhir:context [ fhir:v "ext1" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-caveat-type"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext1" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Coding"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "723188008"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://snomed.info/sct"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Renal insufficiency (disorder)"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext2" ]
           ] [
             fhir:context [ fhir:v "ext2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-qualifier-value"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:Id ;
                 fhir:v "value"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "category" ] ;
             fhir:variable [ fhir:v "category" ]
           ] [
             fhir:context [ fhir:v "category" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "problem-list-item"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://terminology.hl7.org/CodeSystem/condition-category"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Problem List Item"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:variable [ fhir:v "code" ]
           ] [
             fhir:context [ fhir:v "code" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding2" ]
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "723188008"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://snomed.info/sct"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Renal insufficiency (disorder)"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "subject" ] ;
             fhir:variable [ fhir:v "subject" ]
           ] [
             fhir:context [ fhir:v "subject" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %patient.id"
               ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "caveatListRenalInsufficiencyCreatinineClearanceINR" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "answer" ] ;
               fhir:element [ fhir:v "item" ] ;
               fhir:variable [ fhir:v "subitem" ] ;
               fhir:condition [ fhir:v "(linkId.value = 'caveatList.renalInsufficiency.creatinineClearance')" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "bundle" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "entry" ] ;
               fhir:variable [ fhir:v "e" ]
             ] [
               fhir:context [ fhir:v "e" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "resource" ] ;
               fhir:variable [ fhir:v "observation" ] ;
               fhir:transform [ fhir:v "create" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "Observation"
                 ]
               ] )
             ] [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "status" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "final"
                 ]
               ] )
             ] [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "id" ] ;
               fhir:variable [ fhir:v "uuid" ] ;
               fhir:transform [ fhir:v "uuid" ]
             ] [
               fhir:context [ fhir:v "e" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "fullUrl" ] ;
               fhir:transform [ fhir:v "evaluate" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "'urn:uuid:' + %uuid"
                 ]
               ] )
             ] [
               fhir:context [ fhir:v "condition" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "evidence" ] ;
               fhir:variable [ fhir:v "evidence" ]
             ] [
               fhir:context [ fhir:v "evidence" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "detail" ] ;
               fhir:variable [ fhir:v "detail" ]
             ] [
               fhir:context [ fhir:v "detail" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "reference" ] ;
               fhir:transform [ fhir:v "evaluate" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "'urn:uuid:' + %uuid"
                 ]
               ] )
             ] [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:variable [ fhir:v "cc" ]
             ] [
               fhir:context [ fhir:v "cc" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "coding" ] ;
               fhir:variable [ fhir:v "c" ]
             ] [
               fhir:context [ fhir:v "c" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "system" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "http://loinc.org"
                 ]
               ] )
             ] [
               fhir:context [ fhir:v "c" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "33558-8"
                 ]
               ] )
             ] [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "subject" ] ;
               fhir:variable [ fhir:v "subject" ]
             ] [
               fhir:context [ fhir:v "subject" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "reference" ] ;
               fhir:transform [ fhir:v "evaluate" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "'urn:uuid:' + %patient.id"
                 ]
               ] )
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "caveatListRenalInsufficiencyCreatinineClearanceQuantity" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "subitem" ] ;
                 fhir:element [ fhir:v "item" ] ;
                 fhir:variable [ fhir:v "quantityitem" ] ;
                 fhir:condition [ fhir:v "((linkId.value = 'caveatList.renalInsufficiency.creatinineClearance.quantity') and answer.exists())" ]
               ] ) ;
               fhir:rule ( [
                 fhir:name [ fhir:v "caveatListRenalInsufficiencyCreatinineClearanceQuantityValue" ] ;
                 fhir:source ( [
                   fhir:context [ fhir:v "quantityitem" ] ;
                   fhir:element [ fhir:v "answer" ] ;
                   fhir:variable [ fhir:v "answer" ]
                 ] ) ;
                 fhir:rule ( [
                   fhir:name [ fhir:v "value" ] ;
                   fhir:source ( [
                     fhir:context [ fhir:v "answer" ] ;
                     fhir:type [ fhir:v "Quantity" ] ;
                     fhir:element [ fhir:v "value" ] ;
                     fhir:variable [ fhir:v "value" ]
                   ] ) ;
                   fhir:target ( [
                     fhir:context [ fhir:v "observation" ] ;
                     fhir:contextType [ fhir:v "variable" ] ;
                     fhir:element [ fhir:v "value" ] ;
                     fhir:transform [ fhir:v "copy" ] ;
                     fhir:parameter ( [
                       fhir:value [
                         a fhir:Id ;
                         fhir:v "value"
                       ]
                     ] )
                   ] )
                 ] )
               ] )
             ] [
               fhir:name [ fhir:v "caveatListRenalInsufficiencyCreatinineClearancedateTime" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "subitem" ] ;
                 fhir:element [ fhir:v "item" ] ;
                 fhir:variable [ fhir:v "datetimeitem" ] ;
                 fhir:condition [ fhir:v "((linkId.value = 'caveatList.renalInsufficiency.creatinineClearance.dateTime') and answer.exists())" ]
               ] ) ;
               fhir:rule ( [
                 fhir:name [ fhir:v "caveatListRenalInsufficiencyCreatinineClearanceDateTimeValue" ] ;
                 fhir:source ( [
                   fhir:context [ fhir:v "datetimeitem" ] ;
                   fhir:element [ fhir:v "answer" ] ;
                   fhir:variable [ fhir:v "answer" ]
                 ] ) ;
                 fhir:rule ( [
                   fhir:name [ fhir:v "value" ] ;
                   fhir:source ( [
                     fhir:context [ fhir:v "answer" ] ;
                     fhir:type [ fhir:v "dateTime" ] ;
                     fhir:element [ fhir:v "value" ] ;
                     fhir:variable [ fhir:v "value" ]
                   ] ) ;
                   fhir:target ( [
                     fhir:context [ fhir:v "observation" ] ;
                     fhir:contextType [ fhir:v "variable" ] ;
                     fhir:element [ fhir:v "effective" ] ;
                     fhir:transform [ fhir:v "copy" ] ;
                     fhir:parameter ( [
                       fhir:value [
                         a fhir:Id ;
                         fhir:v "value"
                       ]
                     ] )
                   ] )
                 ] )
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "caveatListRenalInsufficiencyCreatinine" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "answer" ] ;
               fhir:element [ fhir:v "item" ] ;
               fhir:variable [ fhir:v "subitem" ] ;
               fhir:condition [ fhir:v "(linkId.value = 'caveatList.renalInsufficiency.creatinine')" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "bundle" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "entry" ] ;
               fhir:variable [ fhir:v "e" ]
             ] [
               fhir:context [ fhir:v "e" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "resource" ] ;
               fhir:variable [ fhir:v "observation" ] ;
               fhir:transform [ fhir:v "create" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "Observation"
                 ]
               ] )
             ] [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "status" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "final"
                 ]
               ] )
             ] [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "id" ] ;
               fhir:variable [ fhir:v "uuid" ] ;
               fhir:transform [ fhir:v "uuid" ]
             ] [
               fhir:context [ fhir:v "e" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "fullUrl" ] ;
               fhir:transform [ fhir:v "evaluate" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "'urn:uuid:' + %uuid"
                 ]
               ] )
             ] [
               fhir:context [ fhir:v "condition" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "evidence" ] ;
               fhir:variable [ fhir:v "evidence" ]
             ] [
               fhir:context [ fhir:v "evidence" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "detail" ] ;
               fhir:variable [ fhir:v "detail" ]
             ] [
               fhir:context [ fhir:v "detail" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "reference" ] ;
               fhir:transform [ fhir:v "evaluate" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "'urn:uuid:' + %uuid"
                 ]
               ] )
             ] [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:variable [ fhir:v "cc" ]
             ] [
               fhir:context [ fhir:v "cc" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "coding" ] ;
               fhir:variable [ fhir:v "c" ]
             ] [
               fhir:context [ fhir:v "c" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "system" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "http://loinc.org"
                 ]
               ] )
             ] [
               fhir:context [ fhir:v "c" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "77140-2"
                 ]
               ] )
             ] [
               fhir:context [ fhir:v "observation" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "subject" ] ;
               fhir:variable [ fhir:v "subject" ]
             ] [
               fhir:context [ fhir:v "subject" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "reference" ] ;
               fhir:transform [ fhir:v "evaluate" ] ;
               fhir:parameter ( [
                 fhir:value [
                   a fhir:String ;
                   fhir:v "'urn:uuid:' + %patient.id"
                 ]
               ] )
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "caveatListRenalInsufficiencyCreatinine" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "subitem" ] ;
                 fhir:element [ fhir:v "item" ] ;
                 fhir:variable [ fhir:v "quantityitem" ] ;
                 fhir:condition [ fhir:v "((linkId.value = 'caveatList.renalInsufficiency.creatinine.quantity') and answer.exists())" ]
               ] ) ;
               fhir:rule ( [
                 fhir:name [ fhir:v "caveatListRenalInsufficiencyCreatinineValue" ] ;
                 fhir:source ( [
                   fhir:context [ fhir:v "quantityitem" ] ;
                   fhir:element [ fhir:v "answer" ] ;
                   fhir:variable [ fhir:v "answer" ]
                 ] ) ;
                 fhir:rule ( [
                   fhir:name [ fhir:v "value" ] ;
                   fhir:source ( [
                     fhir:context [ fhir:v "answer" ] ;
                     fhir:type [ fhir:v "Quantity" ] ;
                     fhir:element [ fhir:v "value" ] ;
                     fhir:variable [ fhir:v "value" ]
                   ] ) ;
                   fhir:target ( [
                     fhir:context [ fhir:v "observation" ] ;
                     fhir:contextType [ fhir:v "variable" ] ;
                     fhir:element [ fhir:v "value" ] ;
                     fhir:transform [ fhir:v "copy" ] ;
                     fhir:parameter ( [
                       fhir:value [
                         a fhir:Id ;
                         fhir:v "value"
                       ]
                     ] )
                   ] )
                 ] )
               ] )
             ] [
               fhir:name [ fhir:v "caveatBloodCoagulationINRPlatelets" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "subitem" ] ;
                 fhir:element [ fhir:v "item" ] ;
                 fhir:variable [ fhir:v "datetimeitem" ] ;
                 fhir:condition [ fhir:v "((linkId.value = 'caveatList.renalInsufficiency.creatinine.dateTime') and answer.exists())" ]
               ] ) ;
               fhir:rule ( [
                 fhir:name [ fhir:v "caveatListRenalInsufficiencyCreatininevalue" ] ;
                 fhir:source ( [
                   fhir:context [ fhir:v "datetimeitem" ] ;
                   fhir:element [ fhir:v "answer" ] ;
                   fhir:variable [ fhir:v "answer" ]
                 ] ) ;
                 fhir:rule ( [
                   fhir:name [ fhir:v "value" ] ;
                   fhir:source ( [
                     fhir:context [ fhir:v "answer" ] ;
                     fhir:type [ fhir:v "dateTime" ] ;
                     fhir:element [ fhir:v "value" ] ;
                     fhir:variable [ fhir:v "value" ]
                   ] ) ;
                   fhir:target ( [
                     fhir:context [ fhir:v "observation" ] ;
                     fhir:contextType [ fhir:v "variable" ] ;
                     fhir:element [ fhir:v "effective" ] ;
                     fhir:transform [ fhir:v "copy" ] ;
                     fhir:parameter ( [
                       fhir:value [
                         a fhir:Id ;
                         fhir:v "value"
                       ]
                     ] )
                   ] )
                 ] )
               ] )
             ] )
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "itemAnswer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "((linkId.value = 'caveatList.claustrophobia') and answer.exists())" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "answerValueString" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "answer" ] ;
           fhir:variable [ fhir:v "answer" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "caveatListClaustrophobia" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "answer" ] ;
             fhir:type [ fhir:v "Coding" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "value" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "e" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "condition" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Condition"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "id" ] ;
             fhir:variable [ fhir:v "uuid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "serviceRequest" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "supportingInfo" ] ;
             fhir:variable [ fhir:v "supportingInfo" ]
           ] [
             fhir:context [ fhir:v "supportingInfo" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext1" ]
           ] [
             fhir:context [ fhir:v "ext1" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-caveat-type"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext1" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Coding"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "19887002"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://snomed.info/sct"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Claustrophobia (finding)"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext2" ]
           ] [
             fhir:context [ fhir:v "ext2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-qualifier-value"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:Id ;
                 fhir:v "value"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "category" ] ;
             fhir:variable [ fhir:v "category" ]
           ] [
             fhir:context [ fhir:v "category" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "problem-list-item"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://terminology.hl7.org/CodeSystem/condition-category"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Problem List Item"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:variable [ fhir:v "code" ]
           ] [
             fhir:context [ fhir:v "code" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding2" ]
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "19887002"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://snomed.info/sct"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Claustrophobia (finding)"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "subject" ] ;
             fhir:variable [ fhir:v "subject" ]
           ] [
             fhir:context [ fhir:v "subject" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %patient.id"
               ]
             ] )
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "itemAnswer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "((linkId.value = 'caveatList.bodyPiercing') and answer.exists())" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "answerValueString" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "answer" ] ;
           fhir:variable [ fhir:v "answer" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "caveatListBodyPiercing" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "answer" ] ;
             fhir:type [ fhir:v "Coding" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "value" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "e" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "condition" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Condition"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "id" ] ;
             fhir:variable [ fhir:v "uuid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "serviceRequest" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "supportingInfo" ] ;
             fhir:variable [ fhir:v "supportingInfo" ]
           ] [
             fhir:context [ fhir:v "supportingInfo" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext1" ]
           ] [
             fhir:context [ fhir:v "ext1" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-caveat-type"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext1" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Coding"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "879862001"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://snomed.info/sct"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Body piercing (finding)"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext2" ]
           ] [
             fhir:context [ fhir:v "ext2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-qualifier-value"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:Id ;
                 fhir:v "value"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "category" ] ;
             fhir:variable [ fhir:v "category" ]
           ] [
             fhir:context [ fhir:v "category" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "problem-list-item"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://terminology.hl7.org/CodeSystem/condition-category"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Problem List Item"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:variable [ fhir:v "code" ]
           ] [
             fhir:context [ fhir:v "code" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding2" ]
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "879862001"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://snomed.info/sct"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Body piercing (finding)"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "subject" ] ;
             fhir:variable [ fhir:v "subject" ]
           ] [
             fhir:context [ fhir:v "subject" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %patient.id"
               ]
             ] )
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "itemAnswer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "((linkId.value = 'caveatList.device') and answer.exists())" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "answerValueString" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "answer" ] ;
           fhir:variable [ fhir:v "answer" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "caveatListDevice" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "answer" ] ;
             fhir:type [ fhir:v "Coding" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "value" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "e" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "condition" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Condition"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "id" ] ;
             fhir:variable [ fhir:v "uuid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "serviceRequest" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "supportingInfo" ] ;
             fhir:variable [ fhir:v "supportingInfo" ]
           ] [
             fhir:context [ fhir:v "supportingInfo" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext1" ]
           ] [
             fhir:context [ fhir:v "ext1" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-caveat-type"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext1" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Coding"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "397578001"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://snomed.info/sct"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Device in situ (finding)"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext2" ]
           ] [
             fhir:context [ fhir:v "ext2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-qualifier-value"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Coding"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "52101004"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://snomed.info/sct"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Present (qualifier value)"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "category" ] ;
             fhir:variable [ fhir:v "category" ]
           ] [
             fhir:context [ fhir:v "category" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "problem-list-item"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://terminology.hl7.org/CodeSystem/condition-category"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Problem List Item"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:variable [ fhir:v "code" ]
           ] [
             fhir:context [ fhir:v "code" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:Id ;
                 fhir:v "value"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "subject" ] ;
             fhir:variable [ fhir:v "subject" ]
           ] [
             fhir:context [ fhir:v "subject" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %patient.id"
               ]
             ] )
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "itemAnswer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "((linkId.value = 'caveatList.hyperthyroidism') and answer.exists())" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "answerValueString" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "answer" ] ;
           fhir:variable [ fhir:v "answer" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "caveatListHyperthyroidism" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "answer" ] ;
             fhir:type [ fhir:v "Coding" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "value" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "e" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "condition" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Condition"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "id" ] ;
             fhir:variable [ fhir:v "uuid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "serviceRequest" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "supportingInfo" ] ;
             fhir:variable [ fhir:v "supportingInfo" ]
           ] [
             fhir:context [ fhir:v "supportingInfo" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext1" ]
           ] [
             fhir:context [ fhir:v "ext1" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-caveat-type"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext1" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Coding"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "34486009"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://snomed.info/sct"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Hyperthyroidism (disorder)"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext2" ]
           ] [
             fhir:context [ fhir:v "ext2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-qualifier-value"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:Id ;
                 fhir:v "value"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "category" ] ;
             fhir:variable [ fhir:v "category" ]
           ] [
             fhir:context [ fhir:v "category" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "problem-list-item"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://terminology.hl7.org/CodeSystem/condition-category"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Problem List Item"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:variable [ fhir:v "code" ]
           ] [
             fhir:context [ fhir:v "code" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding2" ]
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "34486009"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://snomed.info/sct"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Hyperthyroidism (disorder)"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "subject" ] ;
             fhir:variable [ fhir:v "subject" ]
           ] [
             fhir:context [ fhir:v "subject" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %patient.id"
               ]
             ] )
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "itemAnswer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "((linkId.value = 'caveatList.diabetes') and answer.exists())" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "answerValueString" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "answer" ] ;
           fhir:variable [ fhir:v "answer" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "caveatListDiabetes" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "answer" ] ;
             fhir:type [ fhir:v "Coding" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "value" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "e" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "condition" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Condition"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "id" ] ;
             fhir:variable [ fhir:v "uuid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "serviceRequest" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "supportingInfo" ] ;
             fhir:variable [ fhir:v "supportingInfo" ]
           ] [
             fhir:context [ fhir:v "supportingInfo" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext1" ]
           ] [
             fhir:context [ fhir:v "ext1" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-caveat-type"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext1" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Coding"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "73211009"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://snomed.info/sct"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Diabetes mellitus (disorder)"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext2" ]
           ] [
             fhir:context [ fhir:v "ext2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-qualifier-value"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:Id ;
                 fhir:v "value"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "category" ] ;
             fhir:variable [ fhir:v "category" ]
           ] [
             fhir:context [ fhir:v "category" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "problem-list-item"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://terminology.hl7.org/CodeSystem/condition-category"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Problem List Item"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:variable [ fhir:v "code" ]
           ] [
             fhir:context [ fhir:v "code" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding2" ]
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "73211009"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://snomed.info/sct"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Diabetes mellitus (disorder)"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "subject" ] ;
             fhir:variable [ fhir:v "subject" ]
           ] [
             fhir:context [ fhir:v "subject" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %patient.id"
               ]
             ] )
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "itemAnswer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "((linkId.value = 'caveatList.gravida') and answer.exists())" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "answerValueString" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "answer" ] ;
           fhir:variable [ fhir:v "answer" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "caveatListGravida" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "answer" ] ;
             fhir:type [ fhir:v "Coding" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "value" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "e" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "condition" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Condition"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "id" ] ;
             fhir:variable [ fhir:v "uuid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "serviceRequest" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "supportingInfo" ] ;
             fhir:variable [ fhir:v "supportingInfo" ]
           ] [
             fhir:context [ fhir:v "supportingInfo" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext1" ]
           ] [
             fhir:context [ fhir:v "ext1" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-caveat-type"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext1" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Coding"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "366321006"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://snomed.info/sct"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Finding of gravida (finding)"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext2" ]
           ] [
             fhir:context [ fhir:v "ext2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-qualifier-value"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:Id ;
                 fhir:v "value"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "category" ] ;
             fhir:variable [ fhir:v "category" ]
           ] [
             fhir:context [ fhir:v "category" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "problem-list-item"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://terminology.hl7.org/CodeSystem/condition-category"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Problem List Item"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:variable [ fhir:v "code" ]
           ] [
             fhir:context [ fhir:v "code" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding2" ]
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "366321006"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://snomed.info/sct"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Finding of gravida (finding)"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "subject" ] ;
             fhir:variable [ fhir:v "subject" ]
           ] [
             fhir:context [ fhir:v "subject" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %patient.id"
               ]
             ] )
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "itemAnswer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "((linkId.value = 'caveatList.contrastMediaAllergy') and answer.exists())" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "answerValueString" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "answer" ] ;
           fhir:variable [ fhir:v "answer" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "caveatListContrastMediaAllergy" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "answer" ] ;
             fhir:type [ fhir:v "Coding" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "value" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "e" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "condition" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Condition"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "id" ] ;
             fhir:variable [ fhir:v "uuid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "serviceRequest" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "supportingInfo" ] ;
             fhir:variable [ fhir:v "supportingInfo" ]
           ] [
             fhir:context [ fhir:v "supportingInfo" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext1" ]
           ] [
             fhir:context [ fhir:v "ext1" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-caveat-type"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext1" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Coding"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "293637006"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://snomed.info/sct"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Allergy to contrast media (finding)"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext2" ]
           ] [
             fhir:context [ fhir:v "ext2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-qualifier-value"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:Id ;
                 fhir:v "value"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "category" ] ;
             fhir:variable [ fhir:v "category" ]
           ] [
             fhir:context [ fhir:v "category" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "problem-list-item"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://terminology.hl7.org/CodeSystem/condition-category"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Problem List Item"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:variable [ fhir:v "code" ]
           ] [
             fhir:context [ fhir:v "code" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding2" ]
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "293637006"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://snomed.info/sct"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Allergy to contrast media (finding)"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "subject" ] ;
             fhir:variable [ fhir:v "subject" ]
           ] [
             fhir:context [ fhir:v "subject" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %patient.id"
               ]
             ] )
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "DrugPrescription" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "(linkId.value = 'caveatList.drugPrescription')" ]
       ] ) ;
       fhir:dependent ( [
         fhir:name [ fhir:v "DesiredRadiologistServiceItemsDrugDescription" ] ;
         fhir:variable ( [ fhir:v "item" ] [ fhir:v "bundle" ] [ fhir:v "serviceRequest" ] [ fhir:v "patient" ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "DesiredRadiologistServiceItemsDrugDescription" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "src" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "bundle" ] ;
       fhir:type [ fhir:v "Bundle" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "serviceRequest" ] ;
       fhir:type [ fhir:v "ServiceRequest" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "patient" ] ;
       fhir:type [ fhir:v "Patient" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "caveatListDrugPrescriptionMetformin" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "(linkId.value = 'caveatList.drugPrescription.metformin')" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "answerValueString" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "answer" ] ;
           fhir:variable [ fhir:v "answer" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "caveatListDrugPrescription" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "answer" ] ;
             fhir:type [ fhir:v "Coding" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "value" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "e" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "condition" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Condition"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "id" ] ;
             fhir:variable [ fhir:v "uuid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "serviceRequest" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "supportingInfo" ] ;
             fhir:variable [ fhir:v "supportingInfo" ]
           ] [
             fhir:context [ fhir:v "supportingInfo" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext1" ]
           ] [
             fhir:context [ fhir:v "ext1" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-caveat-type"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext1" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Coding"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "182817000"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://snomed.info/sct"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Drug prescription (situation)"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext2" ]
           ] [
             fhir:context [ fhir:v "ext2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-qualifier-value"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:Id ;
                 fhir:v "value"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "category" ] ;
             fhir:variable [ fhir:v "category" ]
           ] [
             fhir:context [ fhir:v "category" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "problem-list-item"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://terminology.hl7.org/CodeSystem/condition-category"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Problem List Item"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:variable [ fhir:v "code" ]
           ] [
             fhir:context [ fhir:v "code" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding2" ]
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "372567009"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://snomed.info/sct"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Metformin (substance)"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "subject" ] ;
             fhir:variable [ fhir:v "subject" ]
           ] [
             fhir:context [ fhir:v "subject" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %patient.id"
               ]
             ] )
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "caveatListDrugPrescriptionBetaBlocker" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ] ;
         fhir:condition [ fhir:v "(linkId.value = 'caveatList.drugPrescription.betaBlocker')" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "answerValueString" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "answer" ] ;
           fhir:variable [ fhir:v "answer" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "caveatListDrugPrescription" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "answer" ] ;
             fhir:type [ fhir:v "Coding" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "value" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "bundle" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "entry" ] ;
             fhir:variable [ fhir:v "e" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:variable [ fhir:v "condition" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Condition"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "id" ] ;
             fhir:variable [ fhir:v "uuid" ] ;
             fhir:transform [ fhir:v "uuid" ]
           ] [
             fhir:context [ fhir:v "e" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "fullUrl" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "serviceRequest" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "supportingInfo" ] ;
             fhir:variable [ fhir:v "supportingInfo" ]
           ] [
             fhir:context [ fhir:v "supportingInfo" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %uuid"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext1" ]
           ] [
             fhir:context [ fhir:v "ext1" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-caveat-type"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext1" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "create" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Coding"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "182817000"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://snomed.info/sct"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Drug prescription (situation)"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "extension" ] ;
             fhir:variable [ fhir:v "ext2" ]
           ] [
             fhir:context [ fhir:v "ext2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "url" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://fhir.ch/ig/ch-rad-order/StructureDefinition/ch-rad-order-qualifier-value"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "ext2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:Id ;
                 fhir:v "value"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "category" ] ;
             fhir:variable [ fhir:v "category" ]
           ] [
             fhir:context [ fhir:v "category" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "problem-list-item"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://terminology.hl7.org/CodeSystem/condition-category"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Problem List Item"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:variable [ fhir:v "code" ]
           ] [
             fhir:context [ fhir:v "code" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding2" ]
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "373254001"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "http://snomed.info/sct"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "coding2" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "display" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "Substance with beta adrenergic receptor antagonist mechanism of action (substance)"
               ]
             ] )
           ] [
             fhir:context [ fhir:v "condition" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "subject" ] ;
             fhir:variable [ fhir:v "subject" ]
           ] [
             fhir:context [ fhir:v "subject" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "reference" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "'urn:uuid:' + %patient.id"
               ]
             ] )
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "PreviousImagingStudyResultsNonDicom" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "item" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "bundle" ] ;
       fhir:type [ fhir:v "Bundle" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "serviceRequest" ] ;
       fhir:type [ fhir:v "ServiceRequest" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "patient" ] ;
       fhir:type [ fhir:v "Patient" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "itemAnswer" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "bundle" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "entry" ] ;
         fhir:variable [ fhir:v "e" ]
       ] [
         fhir:context [ fhir:v "e" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "resource" ] ;
         fhir:variable [ fhir:v "documentReference" ] ;
         fhir:transform [ fhir:v "create" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "DocumentReference"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "documentReference" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "id" ] ;
         fhir:variable [ fhir:v "uuid" ] ;
         fhir:transform [ fhir:v "uuid" ]
       ] [
         fhir:context [ fhir:v "documentReference" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "subject" ] ;
         fhir:variable [ fhir:v "subject" ]
       ] [
         fhir:context [ fhir:v "subject" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "reference" ] ;
         fhir:transform [ fhir:v "evaluate" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "'urn:uuid:' + %patient.id"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "e" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "fullUrl" ] ;
         fhir:transform [ fhir:v "append" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "urn:uuid:"
           ]
         ] [
           fhir:value [
             a fhir:Id ;
             fhir:v "uuid"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "documentReference" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "status" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "current"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "serviceRequest" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "supportingInfo" ] ;
         fhir:variable [ fhir:v "supportingInfo" ]
       ] [
         fhir:context [ fhir:v "supportingInfo" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "reference" ] ;
         fhir:transform [ fhir:v "evaluate" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "'urn:uuid:' + %uuid"
           ]
         ] )
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "answerValueString" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "answer" ] ;
           fhir:variable [ fhir:v "answer" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "documentReference" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "content" ] ;
           fhir:variable [ fhir:v "content" ]
         ] [
           fhir:context [ fhir:v "content" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "attachment" ] ;
           fhir:variable [ fhir:v "attachment" ] ;
           fhir:transform [ fhir:v "evaluate" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:String ;
               fhir:v "%answer.value"
             ]
           ] )
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "description" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "answer" ] ;
             fhir:element [ fhir:v "item" ] ;
             fhir:variable [ fhir:v "dictomitem" ] ;
             fhir:condition [ fhir:v "((linkId.value = 'attachedFile.description') and answer.exists())" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "documentReference" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "description" ] ;
             fhir:transform [ fhir:v "evaluate" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:String ;
                 fhir:v "%dictomitem.answer.value"
               ]
             ] )
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "PreviousImagingStudyResults" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "item" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "bundle" ] ;
       fhir:type [ fhir:v "Bundle" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "serviceRequest" ] ;
       fhir:type [ fhir:v "ServiceRequest" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "patient" ] ;
       fhir:type [ fhir:v "Patient" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "supportingInfo" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "item" ] ;
         fhir:variable [ fhir:v "item" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "bundle" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "entry" ] ;
         fhir:variable [ fhir:v "e" ]
       ] [
         fhir:context [ fhir:v "e" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "resource" ] ;
         fhir:variable [ fhir:v "imagingStudy" ] ;
         fhir:transform [ fhir:v "create" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "ImagingStudy"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "imagingStudy" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "id" ] ;
         fhir:variable [ fhir:v "uuid" ] ;
         fhir:transform [ fhir:v "uuid" ]
       ] [
         fhir:context [ fhir:v "imagingStudy" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "status" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "available"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "imagingStudy" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "subject" ] ;
         fhir:variable [ fhir:v "subject" ]
       ] [
         fhir:context [ fhir:v "subject" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "reference" ] ;
         fhir:transform [ fhir:v "evaluate" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "'urn:uuid:' + %patient.id"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "e" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "fullUrl" ] ;
         fhir:transform [ fhir:v "append" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "urn:uuid:"
           ]
         ] [
           fhir:value [
             a fhir:Id ;
             fhir:v "uuid"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "serviceRequest" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "subject" ] ;
         fhir:variable [ fhir:v "subject" ]
       ] [
         fhir:context [ fhir:v "subject" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "reference" ] ;
         fhir:transform [ fhir:v "evaluate" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "'urn:uuid:' + %patient.id"
           ]
         ] )
       ] [
         fhir:context [ fhir:v "serviceRequest" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "supportingInfo" ] ;
         fhir:variable [ fhir:v "supportingInfo" ]
       ] [
         fhir:context [ fhir:v "imagingStudy" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "series" ] ;
         fhir:variable [ fhir:v "series" ]
       ] [
         fhir:context [ fhir:v "series" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "instance" ] ;
         fhir:variable [ fhir:v "instance" ]
       ] [
         fhir:context [ fhir:v "supportingInfo" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "reference" ] ;
         fhir:transform [ fhir:v "evaluate" ] ;
         fhir:parameter ( [
           fhir:value [
             a fhir:String ;
             fhir:v "'urn:uuid:' + %uuid"
           ]
         ] )
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "answerValueString" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "answer" ] ;
           fhir:variable [ fhir:v "answer" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "description" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "answer" ] ;
             fhir:type [ fhir:v "string" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:variable [ fhir:v "value" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "imagingStudy" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "description" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [
                 a fhir:Id ;
                 fhir:v "value"
               ]
             ] )
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "uid" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "item" ] ;
           fhir:variable [ fhir:v "item" ] ;
           fhir:condition [ fhir:v "(linkId.value = 'dicomObject.sopInstanceUid') and answer.exists()" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "instance" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "uid" ] ;
           fhir:transform [ fhir:v "evaluate" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:String ;
               fhir:v "%item.answer.value"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "modality" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "item" ] ;
           fhir:variable [ fhir:v "item" ] ;
           fhir:condition [ fhir:v "(linkId.value = 'dicomObject.modality') and answer.exists()" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "series" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "modality" ] ;
           fhir:variable [ fhir:v "modality" ]
         ] [
           fhir:context [ fhir:v "modality" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "evaluate" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:String ;
               fhir:v "%item.answer.value.code"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "uid" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "item" ] ;
           fhir:variable [ fhir:v "item" ] ;
           fhir:condition [ fhir:v "(linkId.value = 'dicomObject.studyInstanceUid') and answer.exists()" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imagingStudy" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "identifier" ] ;
           fhir:variable [ fhir:v "uid" ]
         ] [
           fhir:context [ fhir:v "uid" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "type" ] ;
           fhir:variable [ fhir:v "type" ]
         ] [
           fhir:context [ fhir:v "type" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "coding" ] ;
           fhir:variable [ fhir:v "coding" ]
         ] [
           fhir:context [ fhir:v "coding" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "system" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:String ;
               fhir:v "urn:dicom:uid"
             ]
           ] )
         ] [
           fhir:context [ fhir:v "coding" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:String ;
               fhir:v "PLAC"
             ]
           ] )
         ] [
           fhir:context [ fhir:v "uid" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:transform [ fhir:v "evaluate" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:String ;
               fhir:v "%item.answer.value"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "attachmentdicomSeriesInstanceUid" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "item" ] ;
           fhir:variable [ fhir:v "item" ] ;
           fhir:condition [ fhir:v "(linkId.value = 'dicomObject.SeriesInstanceUid') and answer.exists()" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "series" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "uid" ] ;
           fhir:transform [ fhir:v "evaluate" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:String ;
               fhir:v "%item.answer.value"
             ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "acsn" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "item" ] ;
           fhir:element [ fhir:v "item" ] ;
           fhir:variable [ fhir:v "item" ] ;
           fhir:condition [ fhir:v "(linkId.value = 'dicomObject.acsn') and answer.exists()" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "imagingStudy" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "identifier" ] ;
           fhir:variable [ fhir:v "acsn" ]
         ] [
           fhir:context [ fhir:v "acsn" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "type" ] ;
           fhir:variable [ fhir:v "type" ]
         ] [
           fhir:context [ fhir:v "type" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "coding" ] ;
           fhir:variable [ fhir:v "coding" ]
         ] [
           fhir:context [ fhir:v "coding" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "system" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:String ;
               fhir:v "http://terminology.hl7.org/CodeSystem/v2-0203"
             ]
           ] )
         ] [
           fhir:context [ fhir:v "coding" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "code" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:String ;
               fhir:v "ACSN"
             ]
           ] )
         ] [
           fhir:context [ fhir:v "acsn" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:transform [ fhir:v "evaluate" ] ;
           fhir:parameter ( [
             fhir:value [
               a fhir:String ;
               fhir:v "%item.answer.value"
             ]
           ] )
         ] )
       ] )
     ] )
  ] ) . # 

# -------------------------------------------------------------------------------------

