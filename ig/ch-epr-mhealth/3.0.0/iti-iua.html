<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <title>Internet User Authorization (IUA) - CH EPR mHealth (R4) v3.0.0</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link href="fhir.css" rel="stylesheet"/>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap-fhir.css" rel="stylesheet"/>

    <!-- Project extras -->
    <link href="assets/css/project.css" rel="stylesheet"/>
    <link href="assets/css/pygments-manni.css" rel="stylesheet"/>
    <link href="assets/css/jquery-ui.css" rel="stylesheet"/>
  	<link href="assets/css/prism.css" rel="stylesheet" />
    <!-- Placeholder for child template CSS declarations -->
    <link href="assets/css/hl7.css" rel="stylesheet"/>
    <link href="assets/css/fhir.css" rel="stylesheet"/>

    <style>
    

    

    </style>
 

    <script type="text/javascript" src="fhir-table-scripts.js"> </script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <link rel="fhir-logo" sizes="144x144" href="assets/ico/icon-fhir-144.png"/>
    <link rel="fhir-logo" sizes="114x114" href="assets/ico/icon-fhir-114.png"/>
    <link rel="fhir-logo" sizes="72x72" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>

    <style type="text/css">h2{--heading-prefix:"2.1"}
    h3,h4,h5,h6{--heading-prefix:"2.1"}</style>
    <div id="segment-header" class="segment">  <!-- segment-header -->
      <div class="container">  <!-- container -->
        <!-- Placeholder for child template header declarations -->

            <!--
<div id="family-nav">
	<a id="logo" no-external="true" href="http://hl7.org/fhir"> <img
		alt="logo fhir" src="assets/images/fhir-logo-www.png" />
	</a>
</div>
-->


            <div id="family-nav">
                <a id="logo" no-external="true" href="searchform.html">
                    <img src="assets/images/search.png" alt="Search FHIR" />
                </a>
            </div>
            <div id="hl7-nav">
    <a id="ehealthsuisse-logo" no-external="true" href="https://www.e-health-suisse.ch">
        <img alt="visit the e-health-suisse website" height="60" src="assets/images/LogoDE_ehealthsuisse.svg" />
    </a>            
</div>

        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">CH EPR mHealth (R4)</span>
            <br/>
            <span style="display:inline-block;">3.0.0 - DSTU3



  <img alt="Switzerland flag" src="assets/images/che.svg" height="16" title="Switzerland"/>


            </span>
          </p>
        </div>
      </div> <!-- /container -->
    </div>  <!-- /segment-header -->

    <div id="segment-navbar" class="segment">  <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">  <!-- container -->
        <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
          <!--status-bar-->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a class="navbar-brand hidden" href="http://hl7.org/fhir/R4/index.html">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
              <ul xmlns="http://www.w3.org/1999/xhtml" class="nav navbar-nav">
    <li>
        <a href="index.html">Home</a>
    </li>
    <li class="Profiles">
        <a data-toggle="dropdown" href="#" class="dropdown-toggle">Volume 1
            <b class="caret">
            </b>
        </a>
        <ul class="dropdown-menu">
            <li>
                <a href="iti-iua.html">Internet User Authorization (IUA)</a>
            </li>
            <li>
                <a href="iti-pdqm.html">Patient Demographics Query for mobile (PDQm)</a>
            </li>
            <li>
                <a href="iti-pixm.html">Patient Identifier Cross-referencing for mobile (PIXm)</a>
            </li>
            <li>
                <a href="iti-mhd.html">Mobile Access to Health Documents (MHD) with XDS on FHIR</a>
            </li>
            <li>
                <a href="iti-restful-atna.html">RESTful ATNA</a>
            </li>
            <li>
                <a href="iti-mcsd.html">Mobile Care Services Discovery (mCSD)</a>
            </li>
        </ul>
    </li>
    <li class="dropdown">
        <a data-toggle="dropdown" href="#" class="dropdown-toggle">Volume 2
            <b class="caret">
            </b>
        </a>
        <ul class="dropdown-menu">
            <li>
                <a href="iti-103.html">Get Authorization Server Metadata [ITI-103]</a>
            </li>
            <li>
                <a href="iti-71.html">Get Access Token [ITI-71]</a>
            </li>
            <li>
                <a href="iti-104.html">Patient Identity Feed FHIR [ITI-104]</a>
            </li>
            <li>
                <a href="iti-78.html">Mobile Patient Demographics Query [ITI-78]</a>
            </li>
            <li>
                <a href="iti-83.html">Mobile Patient Identifier Cross-reference Query [ITI-83]</a>
            </li>
            <li>
                <a href="iti-65.html">Provide Document Bundle [ITI-65]</a>
            </li>
            <li>
                <a href="iti-66.html">Find Document Lists [ITI-66]</a>
            </li>
            <li>
                <a href="iti-67.html">Find Document References [ITI-67]</a>
            </li>
            <li>
                <a href="iti-68.html">Retrieve Document [ITI-68]</a>
            </li>
            <li>
                <a href="iti-20.html">Record Audit Event [ITI-20]</a>
            </li>
            <li>
                <a href="iti-90.html">Find Matching Care Services [ITI-90]</a>
            </li>
        </ul>
    </li>
    <li class="dropdown">
        <a data-toggle="dropdown" href="#" class="dropdown-toggle">Appendix
            <b class="caret">
            </b>
        </a>
        <ul class="dropdown-menu">
            <li>
                <a href="profiles.html">Profiles</a>
            </li>
            <li>
                <a href="extensions.html">Extensions</a>
            </li>
            <li>
                <a href="terminology.html">Terminology</a>
            </li>
            <li>
                <a href="capstatements.html">Capability Statements</a>
            </li>
            <li>
                <a href="operations.html">Operations</a>
            </li>
            <li>
                <a href="sequencediagrams.html">Sequence diagrams</a>
            </li>
            <li>
                <a href="tracecontext.html">Trace Context</a>
            </li>
            <li>
                <a href="openissues.html">Open Issues / Change Log</a>
            </li>
        </ul>
    </li>
    <li>
        <a href="artifacts.html">Artifacts</a>
    </li>
</ul>

            </div>  <!-- /.nav-collapse -->
          </div>  <!-- /.container -->
        </nav>  <!-- /.navbar -->
      <!-- /HEADER CONTENT -->
      </div>  <!-- /container -->
    </div>  <!-- /segment-navbar -->
    <!--status-bar-->

    <div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
      <div class="container">  <!-- container -->
        <ul class="breadcrumb">
          <li><a href='toc.html'><b>Table of Contents</b></a></li><li><a href='volume1.html'><b>Volume 1</b></a></li><li><b>Internet User Authorization (IUA)</b></li>

        </ul>
      </div>  <!-- /container -->
    </div>  <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">  <!-- segment-content -->
      <div class="container">  <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
  <!--ReleaseHeader--><p id="publish-box">This page is part of the CH EPR mHealth (R4) (v3.0.0: <a no-external="true" href="https://confluence.hl7.org/display/HL7/HL7+Balloting" title="Draft Standard for Trial-Use">DSTU</a>3) based on <a no-external="true" href="http://hl7.org/fhir/R4">FHIR (HL7® FHIR® Standard) R4</a>. This is the current published version in its permanent home (it will always be available at this URL).  For a full list of available versions, see the <a no-external="true" href="http://fhir.ch/ig/ch-epr-mhealth/history.html">Directory of published versions</a></p><!--EndReleaseHeader-->
  <h2>Internet User Authorization (IUA)</h2>
  












    <p><!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#scope" id="markdown-toc-scope">Scope</a></li>
  <li><a href="#use-cases" id="markdown-toc-use-cases">Use Cases</a></li>
  <li><a href="#actors-and-transactions" id="markdown-toc-actors-and-transactions">Actors and Transactions</a></li>
  <li><a href="#actor-options" id="markdown-toc-actor-options">Actor Options</a></li>
  <li><a href="#grouping" id="markdown-toc-grouping">Grouping</a></li>
  <li><a href="#process-flow" id="markdown-toc-process-flow">Process Flow</a></li>
  <li><a href="#security-consideration" id="markdown-toc-security-consideration">Security Consideration</a></li>
</ul>

</div>
<p>This section specifies Swiss national extensions to Internet User Authorization (IUA) Profile, which is <a href="https://profiles.ihe.net/ITI/IUA/index.html">published</a> as an IHE ITI Trial Implementation profile.</p>

<h3 id="scope">Scope</h3>

<p>This profile provides means to retrieve EPR compliant access token and to incorporate the access token to transactions to authorize client applications when accessing protected resources.</p>

<p>This profile is based on the IUA Trial Implementation and adds certain restrictions to be compliant to the ordinances of the Swiss EPR.</p>

<p>The scope of this national extension is limited to provide FHIR based interfaces for primary systems and portals connected to the Swiss EPR. This national extension is currently not scoped for native mobile clients. This profile therefore adds the following restrictions to the IUA Trial Implementation:</p>

<ul>
  <li>SMART on FHIR Apps launched from portals and primary systems require a launch context identifying the portal or primary system.</li>
  <li>Only portals and primary systems registered in the community during the onboarding process may retrieve an authorization token. The Client Authorization by User Consent method of the IUA Trial Implementation SHALL NOT be supported.</li>
</ul>

<p>For further restrictions on transactions and security consideration, see below.</p>

<h3 id="use-cases">Use Cases</h3>

<h4 id="patient-access-from-a-portal">Patient Access from a Portal</h4>

<p>A patient uses a portal which is integrated to the Swiss EPR using the mHealth profiles to access and share data and documents with healthcare professionals. To access documents from the EPR the patient authenticates at a certified Identity Provider and the portal connects to the IUA Authorization Server and sends the required claims to access the EPR.</p>

<p>The IUA Authorization Server verifies if the portal is authorized to access the EPR on behalf of the patient by checking that the portal is registered as a portal of the community.</p>

<p>The IUA Authorization Server verifies that the patient has a valid session at the Identity Provider and retrieves the Identity Assertion from the Identity Provider. The Authorization Server validates the claims together with the data from the Identity Assertion and resolves additional information required to access the EPR (e.g., resolve the digital identity to the EPR-SPID).</p>

<p>The IUA Authorization Server responds an IUA Authorization Token the portal shall incorporate to any transaction to retrieve the data and documents from the patients EPR.</p>

<h4 id="user-access-from-an-integrated-primary-system">User Access from an integrated Primary System</h4>

<p>A healthcare professional uses a primary system which is integrated to the Swiss EPR using the mHealth profiles to access and share data and documents with her patients or other healthcare professionals. To access documents from the EPR the healthcare professional authenticates in her primary system, selects the patient and switches to the user interface to display the patients documents and the primary system connects to the IUA Authorization Server and sends the required claims to access the patients EPR.</p>

<p>The IUA Authorization Server verifies if the primary system is authorized to access the EPR on behalf of the user by checking that the primary system has been registered during the onboarding process of the primary system.</p>

<p>The IUA Authorization Server verifies that the healthcare professional has a valid session at the Identity Provider and retrieves the Identity Assertion from the Identity Provider. The Authorization Server validates the claims together with the data from the Identity Assertion and resolves additional information required to access the EPR (e.g., resolve the relations to institutions or other groups).</p>

<p>The IUA Authorization Server responds an IUA Authorization Token the primary system shall incorporate to any transaction to retrieve the data and documents from the patients EPR.</p>

<h4 id="user-access-from-a-smart-on-fhir-component">User Access from a SMART on FHIR component</h4>

<p>A patient or healthcare professional uses a portal or primary system which uses SMART on FHIR Apps to connect to the Swiss EPR.</p>

<p>The patient or healthcare professional authenticates in the portal or primary system and launches the SMART on FHIR App from the portal or primary system. The portal or primary system first builds a SMART on FHIR launch context with the patient context and identifiers of the portal or primary system application and launches the SMART on FHIR App with the launch context.</p>

<p>The IUA Authorization Server verifies that the portal or primary system is authorized to launch SMART on FHIR Apps which connect to the EPR on behalf of the user by checking that the portal or primary system has been registered beforehand during the onboarding process of the portal or primary system application.</p>

<p>The IUA Authorization Server verifies that the patient or healthcare professional has a valid session at the Identity Provider and retrieves the Identity Assertion from the Identity Provider. The Authorization Server validates the claims together with the data from the Identity Assertion and resolves additional information the SMART on FHIR App requires to access the EPR (e.g., resolve the digital identity to th EPR-SPID).</p>

<p>The IUA Authorization Server responds an IUA Authorization Token the SMART on FHIR App shall incorporate to any transaction to retrieve the data and documents from the patients EPR.</p>

<h3 id="actors-and-transactions">Actors and Transactions</h3>

<p>This national extension enhance the requirements on transactions and the expected actions of the Actors of the IUA Trial Implementation to comply to the legal requirements of the Swiss EPR.</p>

<p>The scope of this national extension is limited to portals and primary systems to comply with ordinances of the Swiss EPR. This national extension is currently not scoped for native mobile clients. Therefore the Client Authorization by User Consent method SHALL NOT be supported.</p>

<p>Portals and primary systems SHALL be identified and authorized either on the TLS connection level or by digital signatures of the messages exchanged, or both. See section Expected Actions of the <a href="iti-71.html#expected-actions-1">Get Access Token transaction</a> for further details.</p>

<div>
<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="215px" preserveAspectRatio="none" style="width:652px;height:215px;background:#FFFFFF;" version="1.1" viewBox="0 0 652 215" width="652px" zoomAndPan="magnify"><defs /><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="134" x="252.25" y="23.5352">IUA Actor Diagram</text><!--entity Client--><g id="elem_Client"><rect fill="#F1F1F1" height="36.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="159" x="7" y="44.4883" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="17" y="68.0234">Authorization Client</text></g><!--entity ResourceServer--><g id="elem_ResourceServer"><rect fill="#F1F1F1" height="36.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="329.5" y="44.4883" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="339.5" y="68.0234">Resource Server</text></g><!--entity Server--><g id="elem_Server"><rect fill="#F1F1F1" height="36.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="162" x="159.5" y="172.9783" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="142" x="169.5" y="196.5134">Authorization Server</text></g><!--link Client to Server--><g id="link_Client_Server"><path d="M80.01,81.3483 C74.82,98.7683 70.36,125.2983 83.5,142.9783 C100,165.1783 126.59,177.3283 153.23,183.8583 " fill="none" id="Client-to-Server" style="stroke:#181818;stroke-width:1.0;" /><polygon fill="#181818" points="157.79,184.9083,149.9085,179.0022,152.9159,183.7934,148.1247,186.8008,157.79,184.9083" style="stroke:#181818;stroke-width:1.0;" /><a href="iti-71.html" target="_top" title="iti-71.html" xlink:actuate="onRequest" xlink:href="iti-71.html" xlink:show="new" xlink:title="iti-71.html" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="156" x="139.5" y="124.5466">ITI-71 Get Access Token</text></a><a href="iti-103.html" target="_top" title="iti-103.html" xlink:actuate="onRequest" xlink:href="iti-103.html" xlink:show="new" xlink:title="iti-103.html" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="266" x="84.5" y="139.8572">ITI-103 Get Authorization Server Metadata</text></a></g><!--link ResourceServer to Server--><g id="link_ResourceServer_Server"><path d="M389.83,81.4083 C384.31,99.1283 373.54,126.1183 355.5,142.9783 C343.21,154.4683 327.75,163.3383 312.18,170.1183 " fill="none" id="ResourceServer-to-Server" style="stroke:#181818;stroke-width:1.0;" /><polygon fill="#181818" points="307.84,171.9383,317.6864,172.1582,312.4533,170.0101,314.6014,164.777,307.84,171.9383" style="stroke:#181818;stroke-width:1.0;" /><a href="iti-103.html" target="_top" title="iti-103.html" xlink:actuate="onRequest" xlink:href="iti-103.html" xlink:show="new" xlink:title="iti-103.html" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="266" x="378.5" y="132.0466">ITI-103 Get Authorization Server Metadata</text></a></g></g></svg>
</div>
<p>This figure shows the actors directly involved in the <em>Internet User Authorization</em> Profile and the relevant 
transactions between them.</p>

<h3 id="actor-options">Actor Options</h3>

<p>This national extension restricts the Actor options of the IUA Trial Implementation to comply to the legal requirements of the Swiss EPR.</p>

<p>The IUA Trial Implementation supports three options for the Authorization Token format; the JWT Token, the SAML Token and the Token Introspection option. Since this national extension will apply to cross community communication, the Token Introspection Option SHALL NOT be used.</p>

<p>This national extension intends to simplify and modernize the technologies used to connect to the Swiss EPR. The legacy SAML Token option SHALL NOT be used. To support automated client configuration the Authorization Server actor SHALL support the Authorization Metadata option.</p>

<h3 id="grouping">Grouping</h3>
<p>The Swiss national extension does not define requirements on the grouping of actors in this profile, which extend or restrict the grouping required from the IUA profile.</p>

<h3 id="process-flow">Process Flow</h3>
<p>For the process flow of this profile and its interplay with the other mHealth profiles see <a href="sequencediagrams.html">sequence diagrams</a>.</p>

<h3 id="security-consideration">Security Consideration</h3>
<p>The Swiss national extension does not define additional security requirements beyond those sepcified in the underlying <a href="https://profiles.ihe.net/ITI/IUA/index.html">IUA Trial Implementation</a>.</p>




</div>
        </div>  <!-- /inner-wrapper -->
      </div>  <!-- /row -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-content -->

  <script type="text/javascript" src="assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script type="text/javascript" src="assets/js/jquery-ui.min.js"> </script>

  <script type="text/javascript">
    $(document).ready(function(){
      if(window.location.hash != "") {
          $('a[href="' + window.location.hash + '"]').click()
      }
    });
  </script>
  <a name="bottom"> </a>
  <div id="segment-footer" igtool="footer" class="segment">  <!-- segment-footer -->
    <div class="container">  <!-- container -->

      <div class="inner-wrapper">
        <p>
          IG &#169; 2020+ <a style="color:var(--footer-hyperlink-text-color)" href="https://www.e-health-suisse.ch">eHealth Suisse</a>.  Package ch.fhir.ig.ch-epr-mhealth#3.0.0 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Tue, Mar 5, 2024 12:06+0100">2024-03-05</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)">
                      Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table of Contents</a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA Report</a>
                 
                

| <a style="color: #81BEF7" target="_blank" href="https://docs.google.com/forms/d/e/1FAIpQLSffM9HysTOg3VdMOeaFmWiWGH0OQT-FZLmwZaeXgZqUr66Y0A/viewform?usp=sf_link&amp;entry%2E1353807103=ch.fhir.ig.ch-epr-mhealth%233.0.0%20/iti-iua.html&amp;entry%2E247644557=Internet%20User%20Authorization%20(IUA)">Propose a change</a>




          </span>
        </p>
      </div>  <!-- /inner-wrapper -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
    <div class="container">  <!-- container -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-post-footer -->
  
  <!-- JS and analytics only. -->
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script type="text/javascript" src="assets/js/bootstrap.min.js"> </script>
  <script type="text/javascript" src="assets/js/respond.min.js"> </script>
  <script type="text/javascript" src="assets/js/anchor.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard-btn.js"> </script>
  <script>anchors.options.visible = 'hover'
anchors.add()</script>
  
<!-- feedback form - Google forms -->
<!-- v0.1, 2021-01-09 -->


  


  



<!-- / feedback form  -->

  <!-- Analytics Below
  ================================================== -->
  </body>
</html>

